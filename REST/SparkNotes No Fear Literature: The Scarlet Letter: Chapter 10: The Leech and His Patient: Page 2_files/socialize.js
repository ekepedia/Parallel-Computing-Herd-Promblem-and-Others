// server injected code
/* Debug info: {"server":"WEB510","utc_time":"2015-01-26 12:54:29.008","src_ip":"96.6.113.86","method":"HTTP/GET","api_key":"2_UGGKiKfaEluDbkM2cTMfH9LBTEJQ08V7qOVliOgV8dCq-kqUhpv53OV_bT45CPjA","site_found":true} */
if (typeof gigya == 'undefined' || !gigya.isGigya) { gigya = { isGigya: true } };
if (!gigya.__initialized) {
gigya.__initialized = true;
gigya.env='prod';
gigya.gaeDomain='chat.gigya.com';
gigya.build={version:'5.2.3',time:'Mon 01/26/2015 13:07:41.66'};
if (typeof gigya.partnerSettings == 'undefined') {
    gigya.partnerSettings={"authMode":"cookie","baseDomains":"sparknotes.com"};
    gigya.partnerSettings.plugins={"apiDomain":"US1.gigya.com"};
}
gigya.providersConfig = {"facebook":{"appID":"103292309718285"}};
gigya.abTesting = null;
//end server injected code
// API adapters
var gigya;
(function(b){(function(g){(function(g){(function(h){(function(h){function e(c,k){k=b.utils.object.clone(k);if(b.partnerSettings.ssoKey){k||(k={});var e=k.callback;k.callback=function(a){b.localInfo.isIE8&&g.parentNode.removeChild(g);b.log.addLog("SSO: About to invoke callback for "+c+" with this response",a);e&&e(a)};k.m=c;k.d=d;k.lid=b.utils.xd._flashListenerID;b.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=b.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(k.lid=b.thisScript.globalConf.legacyCrossSiteMethod+
":"+b.utils.xd._flashListenerID);k.callbackID="gig_sso_cb"+(new Date).getTime()+"_"+f++;b.utils.xd.addMessageListener(k.callbackID,{},!1,k.callback);delete k.callback;k.sAPIKey=b.thisScript.APIKey;var h=b.utils.keyValue.serialize(k),g=a(k.callbackID);b.localInfo.isIE8||(g.src="https://cdns.gigya.com/gs/sso.htm?APIKey="+b.partnerSettings.ssoKey+"&version=1");var m=function(){g.src="https://cdns.gigya.com/gs/sso.htm?APIKey="+b.partnerSettings.ssoKey+"&version=1#"+h;b.utils.DOM.removeEventListener(g,
"load",m)};b.utils.DOM.addEventListener(g,"load",m);b.log.addLog("SSO: Calling "+c,{SSOKey:b.partnerSettings.ssoKey,params:k});document.body?b.utils.DOM.appendToBody(g):b.utils.functions.invokeOnPageLoad(function(){b.utils.DOM.appendToBody(g)})}else k&&k.callback&&k.callback()}function a(c){var a=document.getElementById("gig_sso");if(b.localInfo.isIE8||!a)a=document.createElement("iframe"),b.localInfo.isIOS||b.localInfo.isIOSChrome||b.localInfo.isAndroid?(a.style.width="0px",a.style.height="0px",
a.style.display="none"):(a.style.width="30px",a.style.height="10px",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px"),a.id=b.localInfo.isIE8?"gig_sso_"+c:"gig_sso";return a}function c(b){e("setToken",b)}var d=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],f=0;h.getGroupToken=function(b){e("getToken",b)};h.setGroupTokenFromResponse=function(b,a,d){b.sessionInfo&&(b=b.sessionInfo);var f=b.expires_in,f=null==f||""===f||isNaN(f)?
47304E7:0==f?null:1E3*f,e=new Date;e.setTime(e.getTime()+f);c({lt:b.login_token,expiration:null==f?0:e.getTime(),legacyCrossSiteMethod:d,callback:a})};h.setGroupToken=c;h.logout=function(b){e("logout",b)};h.removeGroupToken=function(b){e("removeToken",b)}})(h.sso||(h.sso={}))})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(g){(function(g){(function(h){var g=function(){function e(b,c,d,f,e,k){"undefined"===typeof k&&(k={});this.id=b;this.baseUrl=c;this.methodName=d;this.params=f;this.callback=e;this.settings=k}e.prototype.getUrl=function(){return this.baseUrl+"/"+this.methodName};e.prototype.send=function(b){};e.prototype.getAuthParams=function(){var a={};if(this.params.oauth_token)this.params.authMode="token";else if(!this.params.noAuth){var c=b._.apiAdapters.web.tokenStore.get(this.params.APIKey);
if(c){this.sentLoginToken=c;var d=b.utils.cookie.get("gltexp_"+this.params.APIKey);null!=d&&(a.loginTokenExp=d);a.login_token=c}a.authMode="cookie"}delete this.params.noAuth;b.localInfo.isAndroidBrowser&&(delete this.params.login_token,delete this.params.loginTokenExp,delete this.params.authMode);return a};return e}();h.BaseRequest=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
var __extends=this.__extends||function(b,g){function p(){this.constructor=b}for(var h in g)g.hasOwnProperty(h)&&(b[h]=g[h]);p.prototype=g.prototype;b.prototype=new p};
(function(b){(function(g){(function(g){(function(h){h.callback=function(e,a){!a&&e&&(a=e.context);if(a){var c=b._.apiAdapters.web.pendingRequests[a];c&&c.handleResponse(e)}};var g=function(e){function a(){e.apply(this,arguments);this.ifrName="gigyaPostIframe_"+(new Date).getTime();this.retry=0}__extends(a,e);a.prototype.addDefaultParams=function(){this.params.format="jsonp";this.params.callback=a.callbackName;this.params.context=this.id;var c=this.getAuthParams();this.paramsLoginToken=this.params.login_token;
b.utils.object.add(this.params,c,!0);this.sentLoginToken=this.params.login_token};a.prototype.getCacheKey=function(){return this.methodName+"_"+b.utils.keyValue.serialize(this.params)};a.prototype.send=function(c){var a=this;if(!this.inProgress){b._.apiAdapters.web.pendingRequests[this.id]=this;this.inProgress=!0;this.params.sdk="js_"+b.build.version;this.addDefaultParams();var f=b.utils.keyValue.serialize(this.params);if(!c&&this.settings.cacheTimeout)f=this.getCacheKey(),b.utils.sessionCache.get(f,
this.settings.cacheTimeout,function(c){c?(delete a.settings.cacheTimeout,b._.apiAdapters.web.callback(c,a.id)):(a.inProgress=!1,a.send(!0))});else{c=0;b.localInfo.isIE&&(c=2048);var e=this.getUrl();b.events.global.dispatch({eventName:"jsonp-beforeRequest",url:e,params:this.params,level:9});4096>=e.length+1+f.length+c&&!this.settings.forcePost?b.utils.script.load(e+"?"+f,function(){b._.apiAdapters.web.callback({context:a.id,errorCode:500026,errorMessage:"Network_error"})}):b.utils.functions.invokeOnPageLoad(function(){var c=
document.getElementById("gigyaRequestForms");null==c&&(c=document.createElement("span"),c.id="gigyaRequestForms",c.style.display="none",b.utils.DOM.appendToBody(c));var f=a.getPostContainer();c.appendChild(f)})}}};a.prototype.createParamFormElements=function(){var c=[],a="";for(a in this.params)c=c.concat(['<textarea name="',a,'">']),"object"==typeof this.params[a]?c.push(b.utils.URL.URLEncode(b.utils.JSON.serialize(this.params[a]))):c.push(this.params[a]),c.push("</textarea>");return c.join("")};
a.prototype.getPostContainer=function(){var c=this;if(!this.postContainer){var a=document.createElement("span"),f=this.ifrName+"form",e=this.id;a.innerHTML=['<form accept-charset="UTF-8" id="',f,'" method="post" action="',this.getUrl(),"?context="+this.id+"&saveResponseID="+this.id+'" target="',this.ifrName,'">',this.createParamFormElements(),'<input name="utf8" type="hidden" value="&#x2713;" /><input type="submit" value="" /></form>'].join("");var k,h=b.utils.DOM.createElement("iframe",this.ifrName);
h.setAttribute("id",this.ifrName);b.utils.DOM.addEventListener(h,"load",function(){k?c.getSavedFormResponse(e):(window.setTimeout(function(){var b=document.getElementById(f);b&&b.submit()},10),k=!0)});a.appendChild(h);this.postContainer=a}return a};a.prototype.getSavedFormResponse=function(b){var d=this;(new a(b,this.baseUrl,"socialize.getSavedResponse",{APIKey:this.params.APIKey,saveResponseID:this.id,ucid:this.params.ucid,noAuth:!0},function(b){d.handleResponse(b)})).send()};a.prototype.getDataPendingTimeout=
function(b){return 4>=b?500:8>=b?1E3:21>=b?2E3:39>=b?5E3:-1};a.prototype.handleResponse=function(c){var a=this;this.settings.cacheTimeout&&b.utils.sessionCache.set(this.getCacheKey(),0==c.errorCode?c:null);null!=this.retryTimerID&&window.clearTimeout(this.retryTimerID);this.loaded=!0;this.inProgress=!1;100001==c.errorCode?(c=this.getDataPendingTimeout(this.retry++),0<c&&window.setTimeout(function(){a.send()},c)):(this.dispose(),this.callback(c))};a.prototype.dispose=function(){delete b._.apiAdapters.web.pendingRequests[this.id];
this.postContainer&&b.utils.DOM.removeElement(this.postContainer);delete this.postContainer};a.callbackName="gigya._.apiAdapters.web.callback";return a}(b._.apiAdapters.web.BaseRequest);h.JsonpRequest=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(g){(function(g){(function(h){var g=function(e){function a(b,a,f,h,k,g){"undefined"===typeof g&&(g={});e.call(this,b,a,f,h,k,g);this.windowName=this.methodName.replace(/\./g,"_").replace(/\//g,"")+"_"+(new Date).getTime();this.requestID=this.windowName+(new Date).getTime()}__extends(a,e);a.prototype.beforeRequest=function(){};a.prototype.afterResponse=function(a){a.dontClose&&"false"!=a.dontClose||b.utils.win.close(this.windowName);this.callback(a)};a.prototype.getAuthFlow=function(){return this.params.authFlow?
this.params.authFlow:"popup"};a.prototype.getStateString=function(){var a=b.utils.xd._flashListenerID;if(b.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=b.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()||b.localInfo.isIE&&window.navigator.msDoNotTrack)a=b.thisScript.globalConf.legacyCrossSiteMethod+":"+b.utils.xd._flashListenerID;var d=this.getAuthFlow(),a={domain:document.location.href.split("?")[0].split("#")[0],id:this.requestID,lid:a,messaging:b.localInfo.messagingMethod};
if("redirect"==d||b.localInfo.isWindowsPhone)a.sourceURL=window.top.document.location.href,this.params.redirectURL?(a.redirectURL=b.utils.URL.addParamsToURL(this.params.redirectURL,{gig_events:b.events.global.getEventsForOperation(this.methodName)}),a.addUserInfo=!0,this.params.redirectMethod&&(a.redirectMethod=this.params.redirectMethod)):a.sourceURL=b.utils.URL.addParamsToURL(a.sourceURL,{gig_events:b.events.global.getEventsForOperation(this.methodName)});this.params.provider&&"facebook"==this.params.provider.toLowerCase()&&
(a.invite=this.params.invite);(d=b.external.backplane.getChannelId())&&(a.bp_channel_url=d);return b.utils.keyValue.serialize(a)};a.prototype.getServerParamsString=function(){var a={},d;for(d in this.params)0!=d.indexOf("x_")&&null!=this.params[d]&&(a["x_"+d]=this.params[d],delete a[d]);a.x_APIKey&&(a.client_id=a.x_APIKey,delete a.x_APIKey);a.x_oauth_token&&(a.oauth_token=a.x_oauth_token,delete a.x_oauth_token);a.redirect_uri="/GS/AfterLogin.aspx";a.response_type=this.params.authCodeOnly?"code":"server_token";
a.format="jsonp";a.x_sdk="js_"+b.build.version;(d=b.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(a.x_refUID=d);(d=b.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(a.x_refUID=d);a.state=this.getStateString();b.utils.object.add(a,this.getAuthParams());b._.apiAdapters.web.useAPIProxy&&b._.apiAdapters.web.gmidTicket&&(a.gmidTicket=b._.apiAdapters.web.gmidTicket);delete a.redirectURL;this.sentLoginToken=a.login_token;return b.utils.keyValue.serialize(a)};a.prototype.send=function(){var a=
this;this.beforeRequest();var d=this.getServerParamsString(),f;this.params.provider&&(f=b.socialize._getProviderByName(this.params.provider.toLowerCase()));var e=null;null!=f&&(e=(this.params.enablePopupLocation?"location=1,toolbar=1":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+f.width+",height="+f.height);var h=this.methodName.split(".");b.reports.report(this.params.originalMethodName||h[h.length-1],this.params.APIKey,this.params.cid,this.params.source,this.params.sourceData,{sn:f?
f.toString():null});d=this.getUrl()+"?"+d;"redirect"==this.getAuthFlow()?window.top.document.location.href=d:(b.utils.xd.addMessageListener(this.requestID,this.params,!0,function(b){a.afterResponse(b)}),b.utils.win.open(d,this.windowName,e))};return a}(b._.apiAdapters.web.BaseRequest);h.OauthRequest=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(g){(function(g){(function(h){var g=function(e){function a(){e.apply(this,arguments)}__extends(a,e);a.prototype.send=function(a){var d=this;if(b._.apiAdapters.web.proxyState.ready){var f=function(a){(a=b.utils.JSON.deserialize(a.data))&&a.id==d.id&&(b.utils.DOM.removeEventListener(window,"message",f),d.callback(a.response))};b.utils.DOM.addEventListener(window,"message",f);b.utils.object.add(this.params,this.getAuthParams());b._.apiAdapters.web.ifrAPIProxy.contentWindow.postMessage(this.json(),
"https://cdns.gigya.com")}else b._.apiAdapters.web.proxyState.error&&this.callback({context:this.id,errorCode:500026,errorMessage:"APIProxy error: "+b._.apiAdapters.web.proxyState.error})};a.prototype.json=function(){return b.utils.JSON.serialize({id:this.id,methodName:this.methodName,params:this.params,settings:this.settings})};return a}(b._.apiAdapters.web.BaseRequest);h.APIProxyRequest=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(g){(function(g){(function(h){(function(h){function e(a){a||(a=b.thisScript.APIKey);return a?"glt_"+a:"_gig_lt"}var a={};h.activeNamespaces={};h.get=function(a){return(a=b.utils.cookie.get(e(a)))?a.split("|")[0]:null};h.set=function(a,d,f,e){b.utils.localStorage.removeItem("gigyaSettings");a||(a=b.thisScript.APIKey);a?(b.utils.cookie.set("glt_"+a,d,f),b.utils.cookie.remove("gac_"+a)):b.utils.cookie.set("_gig_lt",d,f)};h.setFromGAC=function(c,d){if(b.thisScript.APIKey){var f=
b.utils.cookie.get("gac_"+b.thisScript.APIKey);f&&!c.neverTryGAC?('"'==f.charAt(0)&&'"'==f.charAt(f.length-1)&&(f=f.substring(1,f.length-1)),a[f]?d():(a[f]=!0,b.socialize.notifyLogin({ignoreApiQueue:!0,neverTryGAC:!0,authCode:f,APIKey:b.thisScript.APIKey,client_id:b.thisScript.APIKey},{callback:function(){b.utils.cookie.remove("gac_"+b.thisScript.APIKey);d();b.socialize.refreshUI({neverTryGAC:!0})}}))):d()}else d()};h.setFromSsoResponse=function(a,d){"undefined"===typeof d&&(d=b.thisScript.APIKey);
0==a.errorCode&&(h.set(d,a.login_token,a.expires_in),b.events.global.dispatchWhenHandlerAdded({eventName:"socialize.login"},null,function(a,c){b.socialize.getUserInfo({signIDs:!0,callback:function(d){a||(a={});0==d.errorCode?(a=b._.addUserInfoToEvent(d,{eventName:"login"},!0),b.external.backplane.executeOnInit(function(){b.external.backplane.getChannelId()&&b.socialize.notifySSOLogin({bp_channel_url:b.external.backplane.getChannelId()})})):a.cancel=!0;c(a)}})}),b.events.global.dispatchWhenHandlerAdded({eventName:"accounts.login"},
null,function(a,c){b.accounts.getAccountInfo({include:"profile,data",includeUserInfo:!1,callback:function(d){a||(a={});0==d.errorCode?(a.eventName="accounts.login",b.utils.object.extractProperties(d,a,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data")):a.cancel=!0;c(a)}})}))};h.remove=function(a){b._.apiAdapters.web.sso.removeGroupToken();a||(a=b.thisScript.APIKey);b.utils.cookie.remove("glt_"+a);b.utils.cookie.remove("_gig_lt")};h.migrateExisting=function(){var a=b.utils.cookie.get("_gig_lt");
a&&b.thisScript.APIKey&&!h.get()&&(b.utils.cookie.remove("_gig_lt"),h.set(null,a))};h.getTokenParam=function(a,d){var f=b.utils.cookie.get(e(a));if(f)return f=f.split("|"),1<f.length?b.utils.keyValue.deserialize(f[1])[d]:null}})(h.tokenStore||(h.tokenStore={}))})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));gigya.isGigya||(gigya.isGigya=!0);
(function(b){(function(g){(function(g){(function(h){var g=function(){return function(){}}();h.APIProxyState=g;h.useAPIProxy;h.ifrAPIProxy;h.proxyState;h.gmidTicket;h.callbacks={};h.pendingRequests={};g=function(){function e(){this.name="Web"}e.prototype.init=function(a){var c=this;this.initAPIProxy(function(){b.utils.functions.createAlias("gigya.auth.loginToken.get",b._.apiAdapters.web.tokenStore.get);c.checkReturnFromURL();c.isSessionValid(void 0,function(c){c?a():b._.apiAdapters.web.sso.getGroupToken({callback:function(c){c&&
b._.apiAdapters.web.tokenStore.setFromSsoResponse(c);a()}})})})};e.prototype.initAPIProxy=function(a){var c=this;if(this.shouldBypass3pc()&&"1"!=b.utils.localStorage.getItem("_gig_3pc_enabled")){var d=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],f=b.utils.DOM.createHiddenIframe(("https:"==document.location.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com")+"/gs/3PCTest.html#domain="+encodeURIComponent(d)),e=function(d){(d=b.utils.keyValue.deserialize(d.data))&&
"3pcTestResult"==d.id&&(b.utils.DOM.removeEventListener(window,"message",e),"true"==d.enabled?(b.utils.localStorage.setItem("_gig_3pc_enabled","1"),h.useAPIProxy=!1,h.gmidTicket=null,a()):(h.useAPIProxy=!0,c.loadAPIProxy(a)),f.parentElement.removeChild(f))};b.utils.DOM.addEventListener(window,"message",e)}else h.useAPIProxy=!1,a()};e.prototype.shouldBypass3pc=function(){var a=b.thisScript.globalConf.bypassCookiePolicy||"whenBlockedByDefault";return("whenBlockedByDefault"==a&&b.localInfo.isSafari||
"always"==a)&&!window._isAPIProxy&&window.postMessage&&!b.partnerSettings.customAPIDomainPrefix};e.prototype.loadAPIProxy=function(a){var c=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2];h.gmidTicket=b.utils.localStorage.getItem("_gig_gmidt");var c="https://cdns.gigya.com/gs/APIProxy.html#apiKey="+encodeURIComponent(b.thisScript.APIKey)+"&domain="+encodeURIComponent(c)+"&scriptUrl="+encodeURIComponent(b.thisScript.scriptElement.src)+"&hasTicket="+
(h.gmidTicket?"true":"false"),d=function(c){(c=b.utils.JSON.deserialize(c.data))&&c.apiKey==b.thisScript.APIKey&&(h.proxyState=c,h.proxyState.gmidTicket&&(h.gmidTicket=h.proxyState.gmidTicket,b.utils.localStorage.setItem("_gig_gmidt",h.gmidTicket,86400)),b.utils.DOM.removeEventListener(window,"message",d),a())};b.utils.DOM.addEventListener(window,"message",d);h.ifrAPIProxy=b.utils.DOM.createHiddenIframe(c)};e.prototype.isSessionValid=function(a,c){"undefined"===typeof a&&(a={});b._.apiAdapters.web.tokenStore.setFromGAC(a,
function(){if(c){var d=null!=b._.apiAdapters.web.tokenStore.get(a.APIKey)||null!=a.oauth_token;c(d)}})};e.prototype.registerForNamespaceEvents=function(a){};e.prototype.onPluginEvent=function(a){};e.prototype.getGmidTicket=function(a){a&&a(h.useAPIProxy?h.gmidTicket:null)};e.prototype.sendRequest=function(a,c,d,f){"undefined"===typeof f&&(f={});var e=this;this.beforeRequest(a,c,f);var g=this.getBaseUrl(a,c,f),l=f.jsSdkRequestId||this.getRequestId(g,a,c,f.disableCache);h.callbacks[l]=h.callbacks[l]||
[];h.callbacks[l].push(d);if(!h.pendingRequests[l]){var n;d=function(a){e.afterResponse(n,a,function(a){e.dispatchCallbacks(l,a)})};n=h.useAPIProxy&&0!=g.indexOf("http://")?new b._.apiAdapters.web.APIProxyRequest(l,g,a,c,d,f):new b._.apiAdapters.web.JsonpRequest(l,g,a,c,d,f);n.send();b._.logoutMethods[a]&&b._.apiAdapters.web.tokenStore.remove(c.APIKey)}};e.prototype.sendOauthRequest=function(a,c,d,f){var e=this;this.beforeRequest(a,c,f);var h=this.getBaseUrl(a,c,f),g=new b._.apiAdapters.web.OauthRequest("",
h,a,c,function(a){e.afterResponse(g,a,function(a){d(a)})},f);g.send()};e.prototype.getBaseUrl=function(a,c,d){a=a.split(".");a=b.partnerSettings.customAPIDomainPrefix?b.partnerSettings.customAPIDomainPrefix+"."+b.partnerSettings.baseDomain:b.utils.stringUtils.format("{0}.{1}",a[0],c.apiDomain?c.apiDomain:b.partnerSettings.plugins.apiDomain);return((b._.apiAdapters.web.tokenStore.get()||c.regToken||c.oauth_token)&&!c.noAuth||d.forceHttps||"https"==b.thisScript.protocol?"https://":"http://")+a};e.prototype.beforeRequest=
function(a,c,d){"undefined"===typeof d&&(d={});(d.clearSession||d.clearSessionCondition&&d.clearSessionCondition(c))&&b._.apiAdapters.web.tokenStore.remove(c.APIKey)};e.prototype.afterResponse=function(a,b,d){var f=this;this.handleTokenResponse(a,b,function(){f.logoutSsoIfNeeded(a,b,function(){d(b)})})};e.prototype.onSDKEvent=function(a){};e.prototype.getTokenParam=function(a,c){return b._.apiAdapters.web.tokenStore.getTokenParam(a,c)};e.prototype.checkReturnFromURL=function(){var a=b.utils.URL.getParamsFromURL(document.location.href);
a.gig_events&&0==a.errorCode&&null!=b._.apiAdapters.web.tokenStore.get()&&b._.apiAdapters.web.sso.setGroupTokenFromResponse({errorCode:0,login_token:b._.apiAdapters.web.tokenStore.get(),expires_in:a.expires_in},function(){var c=a.gig_events.split(",");-1!=b.utils.array.indexOf(c,"accounts.login")?b.accounts.getAccountInfo({include:"profile,data,userinfo",callback:function(a){var f={errorCode:0,eventName:"accounts.login"};b.utils.object.extractProperties(a,f,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");
b.events.global.dispatchWhenHandlerAdded(f);-1!=b.utils.array.indexOf(c,"socialize.login")&&(a=b._.addUserInfoToEvent(a,{errorCode:0,eventName:"socialize.login"},!0),b.events.global.dispatchWhenHandlerAdded(a))}}):b.socialize.getUserInfo({signIDs:!0,callback:function(a){for(var f=0;f<c.length;f++){var e=b._.addUserInfoToEvent(a,{errorCode:0,eventName:c[f]},!0);b.events.global.dispatchWhenHandlerAdded(e)}}})},b.thisScript.globalConf.legacyCrossSiteMethod)};e.prototype.setNewLoginTokenFromResponse=
function(a,c,d){var f=c.sessionInfo?c.sessionInfo.login_token:c.login_token;f?(b._.apiAdapters.web.tokenStore.set(a.params.APIKey,f,null!=c.sessionInfo?c.sessionInfo.expires_in:c.expires_in,b.thisScript.globalConf.legacyCrossSiteMethod),b._.apiAdapters.web.sso.setGroupTokenFromResponse(c,d,b.thisScript.globalConf.legacyCrossSiteMethod)):d()};e.prototype.onInvalidTokenResponse=function(a,c){a.paramsLoginToken?c():b._.apiAdapters.web.sso.getGroupToken({callback:function(d){d&&d.login_token&&d.login_token.split("|")[0]!=
a.sentLoginToken?(b._.apiAdapters.web.tokenStore.setFromSsoResponse(d,a.params.APIKey),a.send()):(b._.apiAdapters.web.tokenStore.remove(a.params.APIKey),a.settings.requiresSession?c():(delete a.params.login_token,delete a.sentLoginToken,a.send()))}})};e.prototype.handleTokenResponse=function(a,c,d){var f=this;c=b.utils.object.clone(c);if(403030==c.errorCode){if(this.shouldWaitForService(a,c))return}else 409012==c.errorCode&&(h.gmidTicket=null,b.utils.localStorage.removeItem("_gig_gmidt"));a.sentLoginToken&&
b._.logoutMethods[a.methodName]&&0==c.errorCode&&b._.apiAdapters.web.tokenStore.remove(a.params.APIKey);this.setNewLoginTokenFromResponse(a,c,function(){if(a.sentLoginToken&&403005==c.errorCode)f.onInvalidTokenResponse(a,d);else d()})};e.prototype.logoutSsoIfNeeded=function(a,c,d){var f=this;b.partnerSettings.ssoKey&&b._.logoutMethods[a.methodName]&&0==c.errorCode?document.location.href!=b.partnerSettings.ssoLogoutUrl?b._.apiAdapters.web.sso.logout({callback:function(a){f.loadLogoutUrls(a.logoutURLs,
d,{UID:c.UID,UIDSignature:c.UIDSignature,signatureTimestamp:c.signatureTimestamp})}}):d():d()};e.prototype.loadLogoutUrls=function(a,c,d){var f=0,e=a?a.split(","):[];a=function(){f++;f>=e.length&&c()};for(var g=0;g<e.length;g++)if(e[g]){var h=b.utils.URL.addParamsToURL(e[g],d);this.loadLogoutUrl(h,a)}else a()};e.prototype.loadLogoutUrl=function(a,c,d){"undefined"===typeof d&&(d=5E3);var f=document.createElement("iframe");f.src=a;f.style.position="absolute";f.style.top="-1000px";f.style.left="-1000px";
var e=!1;window.setTimeout(function(){e||(e=!0,f.parentElement.removeChild(f),c())},d);f.onload=f.onreadystatechange=function(){e||f.readyState&&"complete"!=f.readyState||(e=!0,f.parentElement.removeChild(f),c())};b.utils.DOM.appendToBody(f)};e.prototype.shouldWaitForService=function(a,c){return!0==a.params.retryPossible?(a.params.retryPossible=!1,b.external.facebook.runWhenLoaded(function(){a.send()}),!0):!1};e.prototype.dispatchCallbacks=function(a,c){var d=h.callbacks[a];if(d)for(var f=0;f<d.length;f++)if("function"==
typeof d[f])d[f](b.utils.object.clone(c,!0));delete h.callbacks[a]};e.prototype.getRequestId=function(a,c,d,f){var e=-1!=navigator.userAgent.toLowerCase().indexOf("safari/534");if(f||e)a="R"+(new Date).getTime()+"_"+Math.random();else{d=b.utils.object.clone(d);for(var g in d)0!=g.indexOf("fb_")&&"source"!=g&&"sourceData"!=g||delete d[g];a="R"+b.utils.object.getMurmurHash(a+c+b.utils.object.getHash(d))}return a};return e}();h.WebAdapter=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||
(b._={}))})(gigya||(gigya={}));
(function(b){(function(g){(function(g){(function(g){var m=function(){function e(){this.flashStorageLoaded=!1;this.swfStorage=null;var a=document.location.href.split("#")[1];this.apiKey=decodeURIComponent(a.split("apiKey=")[1].split("&")[0]);this.originDomain=decodeURIComponent(a.split("domain=")[1].split("&")[0]);this.hasTicket="true"===decodeURIComponent(a.split("hasTicket=")[1].split("&")[0]);this.urlScheme=0==document.location.href.indexOf("https:")?"https":"http"}e.init=function(){e.instance=
new e;e.instance.init()};e.prototype.init=function(){var a=this;this.isOriginDomainValid()?this.loadIDs(function(c){c?a.postState({ready:!1,error:c}):(a.gmid&&a.ucid?a.hasTicket?a.postState({ready:!0}):a.getGmidTicketFromServer(function(b){a.postState({ready:!0,gmidTicket:b})}):a.getIDsFromServer(function(b,c,e){a.gmid=b;a.ucid=e;a.storeIDs(function(){a.postState({ready:!0,gmidTicket:c})})}),b.utils.DOM.addEventListener(window,"message",function(b){return a.onRequest(b)}))}):this.postState({ready:!1,
error:"domain_mismatch"})};e.prototype.onRequest=function(a){var c=this;a=b.utils.JSON.deserialize(a.data);var d=a.methodName,f=a.id;if(a&&d&&a.params){var e=b.utils.object.clone(a.params,!0,!0);e.gmid=this.gmid;e.ucid=this.ucid;(new b._.apiAdapters.web.JsonpRequest(f,this.getAPIBaseUrl(d),d,e,function(a){window.parent.postMessage(b.utils.JSON.serialize({id:f,response:a}),c.originDomain)},a.settings)).send()}};e.prototype.isOriginDomainValid=function(){for(var a=b.partnerSettings.baseDomains.split(","),
c=0;c<a.length;c++){var d=a[c];if(this.originDomain.indexOf(d)==this.originDomain.length-d.length)return!0}return!1};e.prototype.getIDsFromServer=function(a){var c={APIKey:this.apiKey,includeTicket:!0,ticketExpires:86400};(new b._.apiAdapters.web.JsonpRequest("idsRequest",this.getAPIBaseUrl("socialize.getIDs"),"socialize.getIDs",c,function(b){a(b.gcid,b.gmidTicket,b.ucid)})).send()};e.prototype.getGmidTicketFromServer=function(a){var c={gmid:this.gmid,APIKey:this.apiKey,expires:86400};(new b._.apiAdapters.web.JsonpRequest("gmidTicketRequest",
this.getAPIBaseUrl("socialize.getGmidTicket"),"socialize.getGmidTicket",c,function(b){a(b.gmidTicket)})).send()};e.prototype.getAPIBaseUrl=function(a){a=a.split(".");return"https://"+b.utils.stringUtils.format("{0}.{1}",a[0],b.partnerSettings.plugins.apiDomain)};e.prototype.postState=function(a){a||(a={});a.apiKey=this.apiKey;window.parent.postMessage(b.utils.JSON.serialize(a),this.originDomain)};e.prototype.loadIDs=function(a){var b=this;this.getIDsFromStorage(function(d,e,g){b.gmid=d;b.ucid=e;a(g)})};
e.prototype.getIDsFromStorage=function(a){var c=this,d,f;try{d=localStorage.getItem(e.GMID_STORAGE_KEY),f=localStorage.getItem(e.UCID_STORAGE_EKY),a(d,f)}catch(g){b.localInfo.isMobile?a(null,null,"no_supported_cookie_storage"):this.loadFlashStorageJS(function(b){if(b)var d=c.swfStorage.get(e.GMID_STORAGE_KEY),f=c.swfStorage.get(e.UCID_STORAGE_EKY);else var g="no_supported_cookie_storage";a(d,f,g)})}};e.prototype.storeIDs=function(a){var b=this;try{localStorage.setItem(e.GMID_STORAGE_KEY,this.gmid),
localStorage.setItem(e.UCID_STORAGE_EKY,this.ucid),a()}catch(d){this.loadFlashStorageJS(function(d){d&&(b.swfStorage.set(e.GMID_STORAGE_KEY,b.gmid),b.swfStorage.set(e.UCID_STORAGE_EKY,b.ucid));a()})}};e.prototype.loadFlashStorageJS=function(a){var c=this,d=function(a){c.flashStorageLoaded=!0;try{c.swfStorage?a(!0):c.swfStorage=new SwfStore({namespace:"gigIDs",swf_url:"https://cdns.gigya.com/gs/swf/swfstore.swf",onready:function(){a(!0)},onerror:function(){console&&console.log("Failed loading swfstore.swf");
a(!1)}})}catch(b){a(!1)}};this.flashStorageLoaded?d(a):b.utils.script.load("https://cdns.gigya.com/gs/js/swfstore.min.js",null,function(){d(a)})};e.GMID_STORAGE_KEY="gig_gmid";e.UCID_STORAGE_EKY="gig_ucid";return e}();g.APIProxy=m})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
var gigya;
(function(f){(function(d){(function(d){(function(d){d.mobileCallbacks={};d.showPlugin=function(b,a){var c,e=b.split(".");1<e.length?(b=e.splice(e.length-1,1)[0],e=e.join(".")):e="socialize";"commentsUI"==b&&(e="comments");c||(c="show"+f.utils.stringUtils.capitalize(b));eval("gigya."+e+"."+c)(a)};var l=function(){function b(){this.name="Mobile"}b.prototype.init=function(a){var c=this;f.events.addMap({defaultMethod:function(a){c.onPluginEvent(a)},eventMap:[{events:"*",args:["$event"]}]});this.sendToMobile("get_ids",
null,function(e){c.ucid=e.ucid;c.gcid=e.gcid;for(var b in f.events.global._activeNamespaces)c.registerForNamespaceEvents(b);a()})};b.prototype.getTokenParam=function(a,c){return""};b.prototype.onPluginEvent=function(a){a.isGlobal||this.sendToMobile("on_plugin_event",a)};b.prototype.onCustomEvent=function(a){this.sendToMobile("on_custom_event",a)};b.prototype.registerForNamespaceEvents=function(a){this.sendToMobile("register_for_namespace_events",{namespace:a})};b.prototype.getGmidTicket=function(a){a&&
this.sendToMobile("send_request/socialize.getGmidTicket",{expires:30},function(c){a(c.gmidTicket)},{forceHttps:!0})};b.prototype.isSessionValid=function(a,c){this.sendToMobile("is_session_valid",{},c)};b.prototype.sendRequest=function(a,c,b,d){this.sendToMobile("send_request/"+a,c,b,d)};b.prototype.sendOauthRequest=function(a,c,b,d){this.sendToMobile("send_oauth_request/"+a,c,b,d)};b.prototype.sendToMobile=function(a,b,e,k){var g=document.createElement("iframe");g.style.display="none";b&&delete b.APIKey;
if(e){var h=(new Date).getTime()+"_"+Math.random();d.mobileCallbacks[h]=function(a){e(a);document.documentElement.removeChild(g);delete d.mobileCallbacks[h]}}a="gsapi://"+a+"?callbackID="+(h||"")+"&params="+(b?encodeURIComponent(f.utils.keyValue.serialize(b)):"")+"&settings="+(k?encodeURIComponent(f.utils.keyValue.serialize(k)):"");g.src=a;window.setTimeout(function(){return document.documentElement.appendChild(g)},0)};b.prototype.onSDKEvent=function(a){a&&a.user&&f._.convertIdentitiesArrayToObject(a.user);
f.events.global.dispatch(a)};return b}();d.MobileAdapter=l})(d.mobile||(d.mobile={}))})(d.apiAdapters||(d.apiAdapters={}))})(f._||(f._={}))})(gigya||(gigya={}));

// end API adapters
var gigya;
(function(b){var a=navigator.userAgent.toLowerCase(),d=new Date,h=document.location.href.split("?")[0].split("#")[0].split("/")[2].split(":")[0],f=-1!=a.indexOf("win"),e=-1!=a.indexOf("msie")||-1!=a.indexOf("mozilla")&&-1!=a.indexOf("trident"),c=-1!=a.indexOf("msie 6."),g=-1!=a.indexOf("msie 7."),k=-1!=a.indexOf("msie 8."),p=-1!=a.indexOf("msie 9."),n=-1!=a.indexOf("mozilla")&&-1!=a.indexOf("trident/7.0"),m=-1!=a.indexOf("iphone")||-1!=a.indexOf("ipad")||-1!=a.indexOf("ipod"),l;l=-1!=a.indexOf("applewebkit")&&-1!=
a.indexOf("version/")?parseInt(a.split("version/")[1].split(" ")[0]):0;var t=-1!=a.indexOf("android"),r=function(c){return-1===c.indexOf("mozilla/5.0")||-1===c.indexOf("android 4")||-1===c.indexOf("applewebkit")||-1!==c.indexOf("windows phone")?!1:(c=/chrome\/(\d+)/.exec(c))?20>parseInt(c[1]):!0}(a),s;s=-1!=a.indexOf("android")?parseFloat(a.slice(a.indexOf("android")+8)):0;var q=-1!=a.indexOf("chrome"),v=-1!=a.indexOf("firefox"),u=-1!=a.indexOf("opera"),x=navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("safari")&&
-1==navigator.appVersion.toLowerCase().indexOf("chrome")&&-1==a.indexOf("android"),w=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),y=-1!=a.indexOf("crios"),A=navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("mac")?!0:!1,B=-1!=a.indexOf("windows phone"),C=null!=window.postMessage&&(-1==a.indexOf("msie")||-1!=a.indexOf("iemobile")),z;try{z=null!=window.localStorage}catch(D){z=!1}b.localInfo={initTime:d,version:0,pageDomain:h,userAgent:a,isWin:f,isIE:e,
isIE6:c,isIE7:g,isIE8:k,isIE9:p,isIE11:n,isIOS:m,iosVersion:l,isAndroid:t,isAndroidBrowser:r,androidVersion:s,isChrome:q,isFF:v,isOpera:u,isSafari:x,isIOSWebView:w,isIOSChrome:y,isMAC:A,isWindowsPhone:B,supportsPostMessage:C,supportsLocalStorage:z,quirksMode:"BackCompat"==document.compatMode&&-1!=a.indexOf("msie"),backCompat:"BackCompat"==document.compatMode,isMobile:function(){var c="(iphone;android;midp;240x320;blackberry;netfront;nokia;panasonic;portalmmm;sharp;sie-;sonyericsson;symbian;windows ce;benq;mda;mot-;opera mini;philips;pocket pc;sagem;samsung;htc".split(";"),
b;for(b in c)if(-1!=a.indexOf(c[b]))return!0;return!1}(),isMobileApp:function(){if(!document.getElementsByTagName)return!1;for(var c=document.getElementsByTagName("meta"),b=0;b<c.length;b++)if("viewport"==c[b].getAttribute("name")){var k=c[b].getAttribute("content");if(k&&-1!==k.indexOf("width=device-width"))return!0}return!1}(),isTouch:function(){if("ontouchstart"in window)return!0;if("onmsgesturechange"in window)try{new ActiveXObject("htmlfile")}catch(c){return!0}return!1}(),messagingMethod:0}})(gigya||
(gigya={}));
(function(b){var a=navigator.userAgent.toLowerCase();(function(d){(function(b){b.indexOf=function(b,c){for(var g=0;g<b.length;g++)if(b[g]==c)return g;return-1};b.clone=function(b){for(var c=[],g=0;g<b.length;g++)c[g]=b[g];return c};b.removeByValue=function(b,c){if(b)for(var g=b.length-1;0<=g;g--)b[g]==c&&b.splice(g,1)};b.removeByProperty=function(b,c,g){if(b)for(var k=b.length-1;0<=k;k--)b[k][c]==g&&b.splice(k,1)};b.getArrayFromString=function(b,c,g){if(!b||"string"!=typeof b)return[];g&&(b=b.toLowerCase());
return(b=b.replace(/[ ]/g,"").replace(/,,/g,","))?b.split(c):[]}})(d.array||(d.array={}));(function(b){b.create=function(b,c){return function(){return c.apply(b,arguments)}}})(d.delegate||(d.delegate={}));(function(a){a.fill=function(e,c){"function"==typeof e&&(e=e(c));e instanceof Array&&(e=e.join(""));var g=/(\$)(!?)([a-z_][a-z_.\d]*)([(][^()]*[)])?|(\$)(!?)\{([a-z_][a-z_.\d]*)([(][^()]*[)])?\}/gi;g.lastIndex=0;for(var k=e,p=g.exec(k),a;null!=p;){a="$"==p[1]?0:4;var f="!"==p[2+a],d=p[3+a];a=p[4+
a];null==a&&(a="");"."==d.substring(0,1)&&(d=d.substring(1));"DBG"==d.substring(0,3)&&(d=d.substring(3));var h="";for(a=d+a;a!=h;){var h=a,r=g.lastIndex;a=b.utils.templates.fill(h,c);g.lastIndex=r}h="";r=0;if(null!=c[d.split(".")[0]])try{h=(new Function("o","p",'return eval("o." + p)'))(c,a)}catch(s){}else h="$"+(f?"!":"")+a,r=1;k=f?k.replace(p[0],""):k.substr(0,p.index)+h+k.substr(p.index+p[0].length);g.lastIndex=p.index+r;p=g.exec(k)}return k}})(d.templates||(d.templates={}));(function(a){a.callFunction=
function(b,c){var g=eval(b),k=b.split(".");k.splice(k.length-1,1);k=eval(k.join("."));g.apply(k,c)};a.invokeOnPageLoad=function(e,c){if(!document.readyState&&document.body||"loaded"==document.readyState||"complete"==document.readyState||!c&&"interactive"==document.readyState&&document.body)e();else{var g=!1,k=function(){g||(g=!0,e())};window.setTimeout(k,2E4);b.utils.DOM.addEventListener(window,"load",k);b.utils.DOM.addEventListener(document,"DOMContentLoaded",k)}};a.createAlias=function(b,c){for(var g=
b.split("."),k=window,a=0;a<g.length-1;a++){var f=g[a];k[f]||(k[f]={});k=k[f]}k[g[g.length-1]]=c}})(d.functions||(d.functions={}));(function(a){var e={};a.open=function(c,g,k){if(b.localInfo.isIE&&2048<c.length||4096<c.length)b.utils.redirect(c.split("?")[0],[b.utils.URL.getParamsFromURL(c)],"POST","_blank");else{k||(k="menubar=0,toolbar=0,resizable=1,scrollbars=1,width=960,height=680");var a=k;try{var f=parseInt(k.split("width=")[1].split(",")[0]),d=parseInt(k.split("height=")[1].split(",")[0]),
l=(screen.width-f)/2,h=(screen.height-d)/2;0>l&&(l=0);0>h&&(h=0);a+=",top="+h+",left="+l}catch(r){}(c=window.open(c,g,a))&&c.focus&&c.focus();e[g]=c}return null!=e[g]};a.close=function(c){if(null!=e[c]){var g=function(){try{null!=e[c]&&e[c].close(),delete e[c]}catch(b){}};6<=b.localInfo.iosVersion?g():window.setTimeout(g,10)}}})(d.win||(d.win={}));(function(b){b.isExplicitTrue=function(b){b=(""+b).toLowerCase();return"true"==b||"1"==b};b.isExplicitFalse=function(b){b=(""+b).toLowerCase();return"false"==
b||"0"==b}})(d.validation||(d.validation={}));(function(a){function e(c,b,g){if(!b)return c;b=b.split(".");for(var a=0;a<b.length;a++){var e=b[a];g&&!c[e]&&(c[e]={});if(c[e])c=c[e];else return null}return c}function c(b,g,a,e,f,d){"undefined"===typeof e&&(e=20);"undefined"===typeof f&&(f=0);if(f>e||"undefined"==typeof b||null==b||"function"==typeof b&&a)return null;if(b.constructor==Array){for(var h=[],s=0;s<b.length;s++)a&&"function"==typeof b[s]||(h[s]=g?c(b[s],g,a,e,f+1,d):b[s]);return h}if("object"==
typeof b){h={};for(s in b)d&&"context"==s||a&&"function"==typeof b[s]||(h[s]=g?c(b[s],g,a,e,f+1,d):b[s]);return h}return b}function g(c,a,e){if(null!=c){null==a&&(a={});if(c.constructor==Array)for(var f=0;f<c.length;f++)g(c[f],a,e);else if(e){e=e.split("|");var f={},d;for(d in c)f[d.toLowerCase()]=1;for(d=0;d<e.length;d++){var h=e[d];f[h.toLowerCase()]&&(a[h]=c[h])}}else a=b.utils.object.clone(c,!1);return a}}a.removeUndefined=function(c){var b={},g;for(g in c)null!=c[g]&&void 0!=c[g]&&(b[g]=c[g]);
return b};a.getPropertyBySerializedName=e;a.setPropertyBySerializedName=function(c,b,g){b=b.split(".");var a=b.pop();e(c,b.join("."),!0)[a]=g};a.add=function(c,b,g){for(var a in b)g&&"undefined"!=typeof c[a]||(c[a]=b[a])};a.getHash=function(c){var g=[],a;for(a in c){var e;"object"==typeof c[a]?e=b.utils.JSON.serialize(c[a],!1):c[a]&&(e=c[a].toString());g.push(a+"="+e)}return g.sort().join("&")};a.getMurmurHash=function(c,b){b||(b=0);var g,a,e,f,d;g=c.length&3;a=c.length-g;e=b;for(d=0;d<a;)f=c.charCodeAt(d)&
255|(c.charCodeAt(++d)&255)<<8|(c.charCodeAt(++d)&255)<<16|(c.charCodeAt(++d)&255)<<24,++d,f=3432918353*(f&65535)+((3432918353*(f>>>16)&65535)<<16)&4294967295,f=f<<15|f>>>17,f=461845907*(f&65535)+((461845907*(f>>>16)&65535)<<16)&4294967295,e^=f,e=e<<13|e>>>19,e=5*(e&65535)+((5*(e>>>16)&65535)<<16)&4294967295,e=(e&65535)+27492+(((e>>>16)+58964&65535)<<16);f=0;switch(g){case 3:f^=(c.charCodeAt(d+2)&255)<<16;case 2:f^=(c.charCodeAt(d+1)&255)<<8;case 1:f^=c.charCodeAt(d)&255,f=3432918353*(f&65535)+((3432918353*
(f>>>16)&65535)<<16)&4294967295,f=f<<15|f>>>17,e^=461845907*(f&65535)+((461845907*(f>>>16)&65535)<<16)&4294967295}e^=c.length;e^=e>>>16;e=2246822507*(e&65535)+((2246822507*(e>>>16)&65535)<<16)&4294967295;e^=e>>>13;e=3266489909*(e&65535)+((3266489909*(e>>>16)&65535)<<16)&4294967295;return(e^e>>>16)>>>0};a.clone=c;a.merge=function(c){for(var b={},g=0;g<c.length;g++)if(c[g]&&c[g].length)for(var e=0;e<c[g].length;e++)for(var a in c[g][e])b[a]=c[g][e][a];else for(a in c[g])b[a]=c[g][a];return b};a.extractProperties=
g;a.extractProperty=function(c,b){return g(c,void 0,b)[b]}})(d.object||(d.object={}));(function(a){function e(c,g,k,e,d){var m=b.localInfo.pageDomain,l=b.partnerSettings.baseDomain;null==e&&(e=0<l.length&&m.length>=l.length&&m.lastIndexOf(l)==m.length-l.length?l:m);k=null==k||""===k||isNaN(k)?47304E7:0==k?null:1E3*k;l=new Date;l.setTime(l.getTime()+k);e=c+"="+escape(g)+(d?"":"; path=/")+(null==k?"":"; expires="+l.toUTCString())+(e&&""!=e&&-1!=e.indexOf(".")?"; domain="+e:"");document.cookie=e;k&&
!(0<k)||a.get(c)||(e=c+"="+escape(g)+(d?"":"; path=/")+(null==k?"":"; expires="+l.toUTCString())+(m&&""!=m&&-1!=m.indexOf(".")?"; domain="+m:""),document.cookie=e)}a.get=function(c){c=c.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1").replace(/^[ \t]+|[ \t]+$/g,"");return(c=document.cookie.match(RegExp("(?:^|;)\\s?"+c+"=(.*?)(?:;|$)")))&&unescape(c[1])};a.set=e;a.remove=function(c){var g=b.localInfo.pageDomain,k=b.partnerSettings.baseDomain;0<k.length&&g.length>=k.length&&g.lastIndexOf(k)==g.length-k.length&&
(e(c,"",-1,k),e(c,"",-1,k,!0));e(c,"",-1,b.localInfo.pageDomain);e(c,"",-1,b.localInfo.pageDomain,!0);e(c,"",-1,"");e(c,"",-1,"",!0)}})(d.cookie||(d.cookie={}));(function(b){b.sanitizeHTML=function(b){return null==b||"undefined"==typeof b?b:b.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/'/g,"&#39;").replace(/&#38;#173;/g,"&#173;")};b.sanitizeAttribute=function(b){return null==b||"undefined"==typeof b?b:b.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,
"&#62;").replace(/\"/g,"&#34;").replace(/\=/g,"&#61;")}})(d.sanitize||(d.sanitize={}));(function(b){function e(c,b,k,a){a||(a=0);if(10<a)return"[Too deep]";var f="",d="",l="";if(k)for(var l="\t",d="\n",h=0;h<a+1;h++)f+=l;var r=typeof c;if("function"==r)return r.toString();if("object"!=r||null===c)return"string"==r&&(c='"'+c.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"'),String(c);var s,q,v=[],u=c&&c.constructor==Array;if(u)for(h=0;h<c.length;h++)q=c[h],r=typeof q,null==q||"undefined"==
r?q="":"string"==r?q='"'+q.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"':"function"==r?q=b?"[Function]":"":q.parentNode&&q.innerHTML?q="[HTML Element]":q.constructor==Date?q="":"object"==r&&null!==q&&(q=e(q,b,k,a+1)),""!=String(q)&&v.push(f+l+String(q));else for(s in c)q=c[s],r=typeof q,null==q||"undefined"==r?q=String(q):"string"==r?q='"'+q.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"':"function"==r?q=b?"[Function]":"":q.parentNode&&q.innerHTML?q="[HTML Element]":q.constructor==
Date?q="":"object"==r&&null!==q&&(q=d+e(q,b,k,a+1)),""!=String(q)&&v.push(f+l+'"'+s.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'":'+String(q));return d+f+(u?"[":"{")+d+v.join(","+d)+d+f+(u?"]":"}")}b.serialize=e;b.deserialize=function(c){""===c&&(c='""');eval("var o");try{eval("o="+c)}catch(b){}return eval("o")}})(d.JSON||(d.JSON={}));(function(b){function a(){var c=0,b=0;"number"==typeof window.pageYOffset?(b=window.pageYOffset,c=window.pageXOffset):document.body&&(document.body.scrollLeft||
document.body.scrollTop)?(b=document.body.scrollTop,c=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(b=document.documentElement.scrollTop,c=document.documentElement.scrollLeft);return{left:c,top:b}}function c(){var c,b;b=document.documentElement;var a=document.body;window.innerHeight?(c=window.innerHeight,b=window.innerWidth):(c=b.clientHeight,0==c&&(c=a.clientHeight),b=b.clientWidth,0==b&&(b=a.clientWidth));return{w:b,
h:c}}b.getScroll=a;b.getFullSize=function(){var c=document.documentElement,b=document.body,a=c.clientHeight;0==a&&(a=b.clientHeight);c=c.clientWidth;0==c&&(c=b.clientWidth);return{w:c,h:a}};b.getInnerSize=c;b.getMiddleCenter=function(){var b=a(),k=c();return{top:b.top+Math.floor(k.h/2),left:b.left+Math.floor(k.w/2)}};b.isRectHorizontallyVisible=function(b){var k=a(),f=c();return b.left>=k.left&&b.right<=k.left+f.w};b.isRectFullyVisible=function(b){var k=a(),f=c();return b.top>=k.top&&b.bottom<=k.top+
f.h&&b.left>=k.left&&b.right<=k.left+f.w}})(d.viewport||(d.viewport={}));var h=d.viewport;(function(b){b.getPosition=function(){var b=0,c=0;if(document.body){var g=null,g={clientX:0,clientY:0};if(g.pageX||g.pageY)b=g.pageX,c=g.pageY;else if(g.clientX||g.clientY)b=g.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=g.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:b,y:c}}}})(d.mouse||(d.mouse={}));(function(a){function e(b,g,k){"undefined"!==typeof k&&
(k=(new Date).getTime()+1E3*k,g=g+"|exp="+k);c(b,g)}var c=function(c,b){},g=function(c){return null},k=function(c){};if(b.localInfo.supportsLocalStorage)c=function(c,b){try{window.localStorage[c]=b}catch(g){}},g=function(c){return window.localStorage[c]},k=function(c){window.localStorage.removeItem(c)};else if(b.localInfo.isIE6||b.localInfo.isIE7)var d,n=function(){d||(d=document.createElement("div"),d.addBehavior("#default#userData"),b.utils.DOM.appendToBody(d))},m=function(){try{n(),d.save("gigya_ud")}catch(c){}},
h=function(){try{n(),d.load("gigya_ud")}catch(c){}},c=function(c,b){h();d.setAttribute(encodeURIComponent(c).replace(/\%/g,""),b);m()},g=function(c){h();return d.getAttribute(encodeURIComponent(c).replace(/\%/g,""))},k=function(c){h();d.removeAttribute(encodeURIComponent(c).replace(/\%/g,""));m()};else if(b.localInfo.isFF)var t=window.globalStorage,c=function(c,b){try{t[location.hostname][c]=b}catch(g){}},g=function(c){return t[location.hostname][c]},k=function(c){delete t[location.hostname][c]};
a.getItem=function(c){var b=g(c);if(b&&b.split){var a=b.split("|exp=");if(1<a.length){var e=parseInt(a[1]);if((new Date).getTime()<e)return a[0];k(c)}}return b};a.setItem=e;a.removeItem=function(c){k(c)};a.setObject=function(c,g){e(c,b.utils.JSON.serialize(g))};a.getObject=function(c){c=this.getItem(c);try{c=b.utils.JSON.deserialize(c)}catch(g){}return c}})(d.localStorage||(d.localStorage={}));(function(a){a.URLEncode=function(b){return encodeURIComponent(b)};a.URLDecode=function(b){return decodeURIComponent(b.replace(/\+/g,
" "))};a.getParamsFromURL=function(a,c){return-1==a.indexOf("?")?{}:b.utils.keyValue.deserialize(a.split("#")[0].split("?")[1],"&",c)};a.getParamValueFromURL=function(b,c,g){if(null==c||""==c)return g;var k=c.indexOf("?");if(-1==k)return g;k="&"+c.substr(k+1);c=k.toLowerCase().indexOf("&"+b.toLowerCase()+"=");if(-1==c)return g;b=k.substr(c+(1+b.length+1))+"&";c=b.indexOf("&");return b.substr(0,c)};a.addParamsToURL=function(a,c){var g=b.utils.URL.getParamsFromURL(a);b.utils.object.add(g,c);var k=a.split("#"),
g=k[0].split("?")[0]+"?"+b.utils.keyValue.serialize(g,"&");1<k.length&&(g+="#"+k[1]);return g}})(d.URL||(d.URL={}));(function(a){a.serialize=function(a,c){var g=[];c||(c="&");for(var k in a)switch(typeof a[k]){case "function":break;case "array":case "object":null!=a[k]&&g.push(k+"="+b.utils.URL.URLEncode(b.utils.JSON.serialize(a[k])));break;case "undefined":break;default:g.push(k+"="+b.utils.URL.URLEncode(a[k]))}return g.join(c)};a.deserialize=function(a,c,g,k){var d={};if(!a)return d;c||(c="&");
a=a.split(c);for(c=0;c<a.length;c++){var f=a[c],h=f.indexOf("=");if(-1==h){var l=g?f.toLowerCase():f;d[l]="1"}else{l=f.substr(0,h);g&&(l=l.toLowerCase());f=f.substr(h+1).replace(/\+/g," ");try{d[l]=k?unescape(f):b.utils.URL.URLDecode(f)}catch(t){d[l]=unescape(f)}}}return d}})(d.keyValue||(d.keyValue={}));(function(a){a._nextZIndex=999999999;a._popupContainers=[];a._pseudoContainers=[];var e=null;a.addEventListener=function(c,b,a){c&&a&&(c.addEventListener?c.addEventListener(b,a,!0):c.attachEvent("on"+
b,a))};a.removeEventListener=function(c,b,a){a&&(c.removeEventListener?c.removeEventListener(b,a,!0):c.detachEvent("on"+b,a))};a.disableDefaultEventHandling=function(c){c.preventDefault?c.preventDefault():window.event&&(window.event.returnValue=!1)};a.addDialogBackListener=function(c){b.utils.DOM._removeDialogBackListener();e=function(g){g&&g.newURL&&-1==g.newURL.indexOf("|gigyaMobileDialog")&&(c(g),b.utils.DOM._removeDialogBackListener())};window.setTimeout(function(){-1==window.location.hash.indexOf("|gigyaMobileDialog")&&
(window.location.hash+="|gigyaMobileDialog");b.utils.DOM.addEventListener(window,"hashchange",e)},50)};a._removeDialogBackListener=function(){e&&(b.utils.DOM.removeEventListener(window,"hashchange",e),e=null,window.location.hash=window.location.hash.replace("|gigyaMobileDialog",""))};a.appendToBody=function(c){document.body&&(document.body.insertBefore&&document.body.firstChild?document.body.insertBefore(c,document.body.firstChild):document.body.appendChild(c))};a.removeElement=function(c){c&&c.parentElement&&
c.parentElement.removeChild(c)};a.isChildOf=function(c,b){for(var a=c.parentNode;a;){if(b==a)return!0;a=a.parentNode}return!1};a.isVisible=function(c){if(!c||!c.parentNode||c.style&&"none"==c.style.display)return!1;if(c.parentNode)return b.utils.DOM.isVisible(c.parentNode)};a.getCenteredDivID=function(c){return"gig_"+b.localInfo.initTime.getTime().toString()+"_"+c};a.createTopLevelDiv=function(c){var g;g=document.createElement("iframe");g.id="gigya_ifr_"+c;g.frameborder="0";g.frameBorder="0";g.allowtransparency=
!0;g.style.position="absolute";g.style.width=b.localInfo.isChrome?"30px":"1px";g.style.height="1px";null!=g.style.zIndex&&(g.style.zIndex=b.utils.DOM._nextZIndex++);b.localInfo.isIE6&&(g.src=b._.getCdnResource("/gs/blank.htm"));var a=document.createElement("div");a.style.position="absolute";null!=a.style.zIndex&&(a.style.zIndex=""+b.utils.DOM._nextZIndex++);a.innerHTML="";c&&(a.id=c);document.body&&document.body.insertBefore&&(document.body.firstChild?(null!=g&&document.body.insertBefore(g,document.body.firstChild),
document.body.insertBefore(a,document.body.firstChild)):document.body.appendChild&&(null!=g&&document.body.appendChild(g),document.body.appendChild(a)));return a};a.hideByID=function(c){if(c=document.getElementById(c))c.style.display="none"};a.showByID=function(c){if(c=document.getElementById(c))c.style.display=b.localInfo.isIE6?"TD"==c.tagName?"table-cell":"TR"==c.tagName?"":"TABLE"==c.tagName?"":"block":""};a.clearByID=function(c){try{var b=document.getElementById(c);null!=b&&(b.innerHTML="")}catch(a){}};
a.getHTMLSize=function(c,b){var a=document.createElement("div");a.style.position="absolute";a.style.left="-1000px";a.innerHTML=c;b.appendChild(a);var e=a.offsetWidth,d=a.offsetHeight;a.parentNode.removeChild(a);return{w:e,h:d}};a.getElementsByClass=function(c,b){if(!c)return[];for(var a=[],e=c.getElementsByTagName("*"),d=0;d<e.length;d++){var f=e[d].className;if(f)for(var f=f.split(" "),h=0;h<f.length;h++)f[h]==b&&a.push(e[d])}return a||[]};a.getElementsByAttribute=function(c,b,a,e){var d=[];c=c.getElementsByTagName(b);
for(b=0;b<c.length;b++)c[b].getAttribute(a)==e&&d.push(c[b]);return d};a.getElementPosition=function(c){if(!c)return{left:0,top:0,bottom:0,right:0};c=c.getBoundingClientRect();var a=b.utils.viewport.getScroll(),k=c.left+a.left,a=c.top+a.top;return{left:k,top:a,right:k+c.width,bottom:a+c.height}};a.addClassToElement=function(c,b){if(c){for(var a=!1,e=c.className.split(" "),d=0;d<e.length;d++)if(e[d]==b){a=!0;break}a||(e.push(b),c.className=e.join(" "))}};a.removeClassFromElement=function(c,b){if(c){for(var a=
c.className.split(" "),e=a.length-1;0<=e;e--)a[e]==b&&a.splice(e,1);c.className=a.join(" ")}};a.isElementClass=function(c,b){if(c){for(var a=!1,e=c.className.split(" "),d=0;d<e.length;d++)if(e[d]==b){a=!0;break}return a}};a.cancelEvent=function(c){c&&("cancelable"in c?c.preventDefault():c.returnValue=!1)};a.createElement=function(c,b){var a=document.createElement("div");b=b||"";a.innerHTML="<"+c+' name="'+b+'" id="'+b+'"></'+c+">";return a.firstChild};a.setSize=function(c,a,k,e){if(null!=c&&null!=
c.style){var d=""+(0<(""+a).indexOf("%")?a:a+"px"),f=""+(0<(""+a).indexOf("%")?k:k+"px");if(c.style.width!=d||c.style.height!=f)void 0==a||isNaN(a)||(c.style.width=d),void 0==k||isNaN(k)||(c.style.height=f);if(e&&a&&k){if(null==c.style.zIndex||e)c.style.zIndex=(this._nextZIndex++).toString();e=h.getInnerSize();d=b.utils.viewport.getScroll();f=d.left;c.style.top=""+Math.max(0,d.top+Math.floor((e.h-k)/2))+"px";c.style.left=""+Math.max(0,f+Math.floor((e.w-a)/2))+"px";c.style.visibility=""}}};a.createHiddenIframe=
function(c){var a=document.createElement("iframe");a.src=c;a.style.width="30px";a.style.height="10px";a.style.position="absolute";a.style.top="-1000px";a.style.left="-1000px";document.body?b.utils.DOM.appendToBody(a):b.utils.functions.invokeOnPageLoad(function(){b.utils.DOM.appendToBody(a)});return a}})(d.DOM||(d.DOM={}));(function(a){function e(c){c=b.utils.object.clone(c);var a=function(){var a=c.data.split("="),e=k[a[0]];if(null!=e){if("function"==typeof e.callback){var d=unescape(a[1]),d=b.utils.keyValue.deserialize(d,
null,null,!0);e.callback(d,e.context)}g(a[0]);(a=document.getElementById(a[0]))&&a.parentElement&&a.parentElement.removeChild(a)}};c&&c.data&&c.data.split&&(6<=b.localInfo.iosVersion?a():window.setTimeout(a,100))}function c(c){var a=document.createElement("iframe");a.style.width="30px";a.style.height="10px";a.style.position="absolute";a.style.top="-1000px";a.style.left="-1000px";a.id=c;a.src="https://cdns.gigya.com/gs/LocalStorageListener.htm?mode=receive&id="+encodeURIComponent(c);b.utils.DOM.appendToBody(a);
return a}function g(c){delete k[c]}var k={};a._flashListenerID="flid"+(new Date).getTime();var d=!1,h={};a._onFlashMessage=function(c){c=b.utils.keyValue.deserialize(c,null,null,!0);var a=c.id,e=k[a];null!=e&&("function"==typeof e.callback&&e.callback(c,e.context),g(a))};a.addMessageListener=function(g,l,t,r){k[g]={callback:r,context:l,t:(new Date).getTime()};l=b.localInfo.messagingMethod;if(0==l||1==l)0==l&&t&&c(g),d||(g=function(c){var b=c.data.split("=")[0];k[b]&&e(c)},window.addEventListener?
window.addEventListener("message",g,!1):window.attachEvent&&window.attachEvent("onmessage",g),d=!0);else{var s="localstorage";b.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=b.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(s=b.thisScript.globalConf.legacyCrossSiteMethod);h[s]||window.setTimeout(function(){var c=document.createElement("div");c.style.width="1px";c.style.height="1px";c.style.overflow="hidden";c.style.position="absolute";c.style.left="-1000px";var g=a._flashListenerID;
"localstorage"!=s&&(g=s+":"+a._flashListenerID);var k=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],e=(new Date).getTime(),d=document.createElement("object");d.setAttribute("id","eventsBroadcaster"+e);d.setAttribute("codebase","https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0");d.setAttribute("width","50");d.setAttribute("height","50");d.setAttribute("src","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");
e=document.createElement("param");e.name="movie";e.setAttribute("value","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");d.appendChild(e);e=document.createElement("param");e.setAttribute("name","allowScriptAccess");e.setAttribute("value","always");d.appendChild(e);e=document.createElement("param");e.setAttribute("name","FlashVars");e.setAttribute("value","action=listen&id="+g+"&eventName=loginComplete&callback=gigya.utils.xd._onFlashMessage&domain="+k);d.appendChild(e);c.appendChild(d);b.utils.functions.invokeOnPageLoad(function(){b.utils.DOM.appendToBody(c);
d.setAttribute("type","application/x-shockwave-flash");d.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000")});h[s]=!0},500)}};a.removeMessageListener=g})(d.xd||(d.xd={}));(function(a){var e={};a.load=function(c,a,k,d){var f;if(d){d=c.replace(/^http(s?):\/\/cdn(s?)[0-9]*.gigya.com\//,"http$1://cdn$2.gigya.com/");if(e[d]){e[d].loaded?k&&k():(e[d].onLoad.push(k),e[d].onError.push(a));return}f=e[d]={loaded:!1,onLoad:[k],onError:[a]}}else f={loaded:!1,onLoad:[k],onError:[a]};a=function(){var a=
document.createElement("script");a.async=!0;a.type="text/javascript";a.charset="UTF-8";var g=!1,k=function(){if(!g){if(f.onLoad&&f.onLoad.length)for(var c=0;c<f.onLoad.length;c++)if("function"==typeof f.onLoad[c])f.onLoad[c]();f.loaded=!0;f.onError=f.onLoad=null;g=!0;setTimeout(function(){a.parentNode&&a.parentNode.removeChild(a)},5E3)}};a.onload=k;a.onreadystatechange=function(){"loaded"==this.readyState&&k()};a.onerror=function(){for(var b=0;b<f.onError.length;b++)if("function"==typeof f.onError[b])f.onError[b]();
delete e[c]};var d=document.getElementsByTagName("head");d&&0<d.length&&d[0].appendChild(a);d=function(){a.src=c};6<=b.localInfo.iosVersion?d():setTimeout(d,1)};b.localInfo.isIE?b.utils.functions.invokeOnPageLoad(a):a()}})(d.script||(d.script={}));(function(a){a.set=function(a,c){if(window.sessionStorage){var g;try{(g=b.utils.JSON.deserialize(window.sessionStorage.getItem("gigyaCache")))||(g={}),null==c&&g[a]?delete g[a]:g[a]={response:c,time:(new Date).getTime()},window.sessionStorage.setItem("gigyaCache",
b.utils.JSON.serialize(g))}catch(k){}b.utils.queue.release("cache","cache_"+a)}};a.get=function(a,c,g){if(window.sessionStorage)try{if(!b.utils.queue.isActive("cache_"+a)){var k=window.sessionStorage.getItem("gigyaCache"),d=b.utils.JSON.deserialize(k),f=d?d[a]:null;if(f){if(c&&c+f.time>(new Date).getTime()){g(f.response);return}b.utils.sessionCache.remove(a);f=null}if(!f){b.utils.queue.hold("cache","cache_"+a);g(null);return}}b.utils.queue.isActive("cache_"+a)&&b.utils.queue.waitFor("cache_"+a,b.utils.sessionCache.get,
arguments)}catch(h){g(null)}else"function"==typeof g&&g(null)};a.remove=function(a){b.utils.sessionCache.set(a,null)}})(d.sessionCache||(d.sessionCache={}));(function(b){b.trim=function(b){return b.replace(/^\s*(\S*(.*\S)?)\s*$/,"$1")};b.format=function(b){for(var c=0;c<arguments.length-1;c++);for(c=0;c<arguments.length-1;c++)null!=arguments[c+1]&&(b=b.split("{"+c+"}").join(arguments[c+1]));return b};b.capitalize=function(b){return b.substring(0,1).toUpperCase()+b.substring(1)}})(d.stringUtils||(d.stringUtils=
{}));(function(d){var e=null;d.isModern=function(){return b.localInfo.isChrome||b.localInfo.isFF||b.localInfo.isOpera||b.localInfo.isIOSWebView||b.localInfo.isIE&&9<=b.utils.browser.getVersion()||b.localInfo.isSafari&&4<=b.utils.browser.getVersion()};d.getVersion=function(){if(e)return e;try{var c=a.match(/(opera|chrome|safari|firefox|msie|trident.*rv:)\/?\s*(\.?\d+(\.\d+)*)/i);if(c[2]){var b=c[2].split(".")[0];if(!isNaN(parseInt(b)))return e=parseInt(b)}}catch(k){}return 0}})(d.browser||(d.browser=
{}));(function(a){function e(b){if(!c[b])return!1;var a=0,e;for(e in c[b].ids)a++;return 0<a}var c={};a.isActive=e;a.release=function(b,a){if(c[a]&&(delete c[a].ids[b],!e(a))){var d=c[a].q;for(c[a].q=[];0<d.length;){var f=d.splice(0,1)[0];try{f.func.apply(this,f.args)}catch(h){console&&console.log("Gigya: Exception while invoking queued method ("+a+": "+b+")")}if(e(a)){c[a].q=d;break}}}};a.hold=function(b,a){c[a]||(c[a]={q:[],ids:{}});c[a].ids[b]=!0};a.waitFor=function(b,a,e){c[b]||(c[b]={q:[],ids:{}});
c[b].q.push({func:a,args:e})};a.queueForExecution=function(c,a,e){e=e||[];b.utils.queue.isActive(c)?b.utils.queue.waitFor(c,a,e):a.apply(this,e)}})(d.queue||(d.queue={}));d.redirect=function(a,e,c,g){if(c&&"post"==c.toLowerCase()){c=document.createElement("form");var k=[];c.setAttribute("accept-charset","UTF-8");c.setAttribute("method","POST");c.setAttribute("action",a);g&&c.setAttribute("target",g);a=b.utils.object.merge(e);for(var d in a)"boolean"!=typeof a[d]&&"string"!=typeof a[d]||"eventName"==
d||k.push('<textarea name="'+encodeURIComponent(d)+'">'+a[d].toString().replace(/\&/g,"&amp;")+"</textarea>");c.innerHTML=k.join("");c.style.display="none";b.utils.DOM.appendToBody(c);c.submit()}else{c=a.split("?");a=c[0];g={};if(1<c.length)for(c=c[1].split("&"),k=0;k<c.length;k++){var h=c[k].split("=");g[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}for(c=0;c<e.length;c++)for(d in k=e[c],k)"boolean"!=typeof k[d]&&"string"!=typeof k[d]||"eventName"==d||(g[d]=k[d]);e=[];for(d in g)e.push(d+"="+
encodeURIComponent(g[d]));document.location.href=a+"?"+e.join("&")}}})(b.utils||(b.utils={}))})(gigya||(gigya={}));(function(b){b.socialize={};b.gcs={};b.gm={};b.comments={};b.accounts={};b.chat={};b.gscounters={}})(gigya||(gigya={}));
(function(b){(function(a){var d={},h=0,f={http:["cdn.gigya.com","cdn1.gigya.com","cdn2.gigya.com","cdn3.gigya.com"],https:["cdns.gigya.com","cdns1.gigya.com","cdns2.gigya.com","cdns3.gigya.com"]};a.getApi=function(c){return d[c]};a.getCdnResource=function(c){var a,e="https:"===document.location.protocol?"https":"http";"cdn.gigya.com"==b.thisScript.base||"cdns.gigya.com"==b.thisScript.base?a=b.thisScript.base:(a=f[e],h>=a.length&&(h=0),a=a[h++]);return e+"://"+a+(c?c:"")};var e=function(){function c(c,
b){this.methodName=c;this.settings=b;this.addAlias();d[c]=this}c.prototype.run=function(c){};c.prototype.preprocessRequest=function(c,b){this.settings.preprocessor?this.settings.preprocessor(c,b):b()};c.prototype.addAlias=function(){var c=this;b.utils.functions.createAlias("gigya."+this.methodName,function(){var a=function(){var a=b.utils.object.merge([b.thisScript.globalConf,e]);c.run(a)},e=b.utils.object.merge([arguments]);b.thisScript&&b.thisScript.globalConf?a():b.utils.queue.queueForExecution("API",
a)})};return c}();a.BaseApi=e})(b._||(b._={}))})(gigya||(gigya={}));(function(b){b.defaultEventMaps=b.defaultEventMaps||[]})(gigya||(gigya={}));
(function(b){(function(a){(function(a){function h(c,a,e,d){var f=function(c){var e=0;c.cancel||(e=b.events.global.dispatch(c,a));d&&d(e)};e?e(c,f):f(c)}var f={},e={};a._activeNamespaces={};a.add=function(c,a,d,p,n){n||(n="socialize");c=n+"_"+c;d||(d="other");f[c]||(f[c]=[]);f[c].push({handler:a,type:d,context:p});!this._activeNamespaces[n]&&b._.apiAdapter&&b._.apiAdapter.registerForNamespaceEvents(n);this._activeNamespaces[n]=1;if((a=e[c])&&"other"==d)for(e[c]=[],d=0;d<a.length;d++)p=a[d],h(p.eventObj,
p.params,p.preProcess)};a.remove=function(c,b){};a.dispatch=function(c,a){var e=0,d=c.isInternal,h=c.eventName.split(",");b.log.addLog('Dispatching global event "'+c.eventName+'" with this event object',c);for(var m=0;m<h.length;m++){var l=h[m].split("."),t=1<l.length?l.shift():"socialize",r=l[0],l="on"+r.substring(0,1).toUpperCase()+r.substring(1),s=b.utils.object.clone(f[t+"_"+l]);s||(s=[]);l=b.utils.object.clone(c);l.isGlobal=!0;l.eventName=r;a&&a.source&&(l.source=a.source);a&&a.sourceData&&(l.sourceData=
a.sourceData);r=["component"];d||r.push("other");for(var q=0;q<r.length;q++)for(var v=r[q],u=0;u<s.length;u++){var x=s[u];if(x.type==v){var w=b.utils.object.clone(l);null==w.context&&null!=x.context&&(w.context=x.context);null==w.context&&delete w.context;"component"!=v&&(e++,b._.handleSpecialFields(w));try{x.handler(w)}catch(y){b.log.addLog('Error while trying to invoke "'+c.eventName+'" global event handler',y)}}}d||b.events._dispatchFromMaps(l,!0);s=window.GenesisExchange_Gigya;r=window.gigya_omniture_conf;
q=window.myOmnitureIntegrationFunc;d||"undefined"==typeof s||"undefined"==typeof r||"socialize"!=t||((new s(r)).processAction(l),"undefined"!=typeof q&&q(r,l))}return e};a.dispatchWhenHandlerAdded=function(c,b,a){"undefined"===typeof b&&(b={});var d=c.eventName.split("."),f=1<d.length?d.shift():"socialize",m=d[0];h(c,b,a,function(d){0==d&&(d="on"+m.substring(0,1).toUpperCase()+m.substring(1),d=f+"_"+d,e[d]||(e[d]=[]),e[d].push({eventObj:c,params:b,preProcess:a}))})};a.getEventsForOperation=function(c){var b=
[];-1!=c.toLowerCase().indexOf("login")?(this._activeNamespaces.socialize&&b.push("socialize.login"),this._activeNamespaces.accounts&&b.push("accounts.login")):-1!=c.toLowerCase().indexOf("addconnection")&&this._activeNamespaces.socialize&&b.push("socialize.connectionAdded");return b.join(",")}})(a.global||(a.global={}));a.addMap=function(a){b.defaultEventMaps.splice(0,0,a)};a.dispatchErrorFromResponse=function(a,h,f){h||(h={});var e=h;e.response&&(e=e.response);h={eventName:"error",status:e.status?
e.status:"FAIL",statusMessage:e.statusMessage?e.statusMessage:"General Server Error",errorMessage:e.errorMessage?e.errorMessage:"General Server Error",errorDetails:e.errorDetails?e.errorDetails:"",errorCode:e.errorCode?e.errorCode:500001,response:h};b.utils.object.add(h,f);b.events.dispatchForWidget(h,a)};a.dispatchInvalidParamError=function(b,a){var f={eventName:"error"};"undefined"==typeof b[a]||null==b[a]?(f.errorCode=400002,f.errorMessage="Missing_required_parameter ("+a+")"):(f.errorCode=400006,
f.errorMessage="Invalid_parameter_value ("+a+")");f.status=f.errorCode;f.statusMessage=f.errorMessage;this.dispatchForWidget(f,b)};a.dispatchForWidget=function(a,h){if(a&&a.eventName){var f=a.eventName;b.log.addLog('Dispatching widget event "'+f+'" for '+h.lastSource+" with this event object",a);var e="on"+f.substring(0,1).toUpperCase()+f.substring(1);b._.handleSpecialFields(a);for(var c=a.eventName.split(","),g,k=0;k<c.length;k++){f=c[k];e="on"+f.substring(0,1).toUpperCase()+f.substring(1);h.context&&
(a.context=h.context);h&&h.source&&(a.source=h.source);h&&h.sourceData&&(a.sourceData=h.sourceData);h&&h.containerID&&(a.sourceContainerID=h.containerID);try{"function"==typeof h[e]&&(g=h[e](a))}catch(p){}if(-1==f.indexOf("login")&&-1==f.indexOf("logout")&&"connectionRemoved"!=f&&"connectionAdded"!=f){this._dispatchFromMaps(a);var f=window.GenesisExchange_Gigya,e=window.gigya_omniture_conf,n=window.myOmnitureIntegrationFunc;"undefined"!=typeof f&&"undefined"!=typeof e&&((new f(e)).processAction(a),
"undefined"!=typeof n&&n(e,a))}}if(null!=g)return g}};a._dispatchFromMaps=function(a,h){for(var f=[],e=!1,c=0;c<b.defaultEventMaps.length;c++){for(var g=b.defaultEventMaps[c].eventMap,k=b.defaultEventMaps[c].defaultMethod,p=0;p<g.length;p++){var n=g[p],m=[];n.args||(n.args=[]);for(var l=0;l<n.args.length;l++)"$event"==n.args[l]?m.push(a):m.push(b.utils.templates.fill(n.args[l],a));n.events.split(",");l=","+n.events.toLowerCase()+",";-1==l.indexOf(",*,")&&(-1==l.indexOf(",on"+a.eventName.toLowerCase()+
",")&&-1==l.indexOf(","+a.eventName.toLowerCase()+",")||(a.source||n.sources)&&n.sources&&-1==n.sources.indexOf(a.source))||(f.push(n),(n.method?n.method:k).apply(this,m),n.override&&(e=!0))}if(e)break}}})(b.events||(b.events={}))})(gigya||(gigya={}));var __extends=this.__extends||function(b,a){function d(){this.constructor=b}for(var h in a)a.hasOwnProperty(h)&&(b[h]=a[h]);d.prototype=a.prototype;b.prototype=new d};
(function(b){(function(a){a.apiAdapter;var d=function(d){function f(b,c,a,k,f,n){"undefined"===typeof k&&(k={});"undefined"===typeof f&&(f={});d.call(this,b,k);this.schema=c;this.requiresSession=a;this.settings=k;this.adapterSettings=f;this.altSessionParams=n;f.requiresSession=a}__extends(f,d);f.prototype.run=function(e){var c=this,g=function(){d.prototype.run.call(c,e);(new a.ServerApiRequest(c,e)).start()};e.ignoreApiQueue?g():b.utils.queue.queueForExecution("API",function(){g()})};return f}(a.BaseApi);
a.ServerApi=d})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(a){function d(){return b.utils.object.clone({status:"OK",statusMessage:"",errorCode:0,statusCode:0,errorMessage:"",errorDetails:"",statusReason:""})}var h;b.events.global.add("onFBCRefreshed",function(){h=!1},"component");var f=function(){function e(c,a){this.api=c;this.params=b.utils.object.merge([b.utils.object.clone(a),c.settings.defaultParams]);this.originalParams=b.utils.object.clone(a);this.callback=a.callback}e.prototype.start=function(){var c=this;a.apiAdapter.isSessionValid(this.params,
function(a){!c.api.adapterSettings.requiresSession||a||c.doesHaveAltSessionParam()?c.sendRequest(a):c.afterServerApiResponse(b.utils.object.clone({status:"FAIL",errorMessage:"Unauthorized user",statusMessage:"Unauthorized user",errorCode:403005}),!1)})};e.prototype.sendRequest=function(c){var e=this,d=b.utils.object.merge([this.api.adapterSettings,{cacheTimeout:this.params.cacheTimeout}]);this.beforeRequest(c,function(f){f?e.afterServerApiResponse(f,c):(b.events.global.dispatch({eventName:"beforeRequest",
methodName:e.api.methodName,rawParams:e.originalParams,params:e.params},e.originalParams),e.api.settings.oauth?a.apiAdapter.sendOauthRequest(e.api.methodName,e.params,function(b){e.afterServerApiResponse(b,c)},d):a.apiAdapter.sendRequest(e.api.methodName,e.params,function(b){e.afterServerApiResponse(b,c)},d))})};e.prototype.beforeRequest=function(c,e){var k=this;b.external.backplane.isLoaded()&&!b.external.backplane._ready&&a.loginMethods[this.api.methodName]?b.external.backplane.executeOnInit(function(){k.beforeRequest(c,
e)}):(-1!=this.api.methodName.indexOf(".logout")&&(!c&&!this.params.regToken||b.partnerSettings.ssoLogoutUrl&&document.location.href==b.partnerSettings.ssoLogoutUrl)&&e(d()),this.handleDeprecatedParams(),this.handleCollections(),this.handleConnectWithoutLoginBehavior(c),this.params.extraPermissions=this.params[this.params.provider+"ExtraPermissions"]||this.params.permissions,this.api.preprocessRequest(this.params,function(){k.setOverridableParams(function(){k.setNonOverridableParams(c,function(){k.filterParams(k.params);
b.log.logCall(k.api.methodName,k.originalParams,k.originalParams.lastSource);e()})})}))};e.prototype.setOverridableParams=function(c){b.utils.object.merge([{},this.params]);c()};e.prototype.doesHaveAltSessionParam=function(){if(this.api.altSessionParams){for(var c=this.api.altSessionParams.split("|"),b=0;b<c.length;b++)if(this.params[c[b]])return!0;return!1}};e.prototype.setNonOverridableParams=function(c,e){if(null!=this.params.APIKey){var d=b.utils.cookie.get("gltexp_"+this.params.APIKey);null!=
d&&(this.params.loginTokenExp=d)}(d=b.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(c||a.loginMethods[this.api.methodName])&&(this.params.refUID=d);if(b.providersConfig.facebook&&!h){var d=b.external.facebook.getParams(),f;for(f in d)this.params[f]=d[f];h=!0}0==this.api.methodName.indexOf("accounts.")&&(b.events.global._activeNamespaces.socialize&&null==this.params.includeUserInfo&&(this.params.includeUserInfo=!0),this.params.include=this.params.include?this.params.include+",":"profile,data");
"accounts.getSchema"==this.api.methodName&&(this.params.includeDynamicSchema="clientOnly");(f=b.external.backplane.getChannelId())&&(this.params.bp_channel_url=f);this.params.targetEnv="jssdk";e()};e.prototype.handleDeprecatedParams=function(){this.params.pendingRegistration?this.params.pending_registration=this.params.pendingRegistration:this.params.newUsersPendingRegistration&&(this.params.pending_registration=this.params.newUsersPendingRegistration);!0==this.params.alwaysForceAuthentication&&(this.params.forceAuthentication=
!0);this.params.timestamp&&(this.params.UIDTimestamp=this.params.timestamp,delete this.params.timestamp);this.params.signature&&0==this.api.methodName.indexOf("socialize.")&&(this.params.UIDSig=this.params.signature,delete this.params.signature);this.params.nonce&&(this.params.UIDNonce=this.params.nonce,delete this.params.nonce);this.params.format&&!this.params.dataFormat&&(this.params.dataFormat=this.params.format,delete this.params.format)};e.prototype.handleCollections=function(){this.params.recipients&&
(this.params.recipients=this.extractListOfGIGUIDs(this.params.recipients));if(this.params.friends){var c=this.extractListOfGIGUIDs(this.params.friends);0<this.params.UIDs.length&&(this.params.UIDs+=",");this.params.UIDs+=c}};e.prototype.extractListOfGIGUIDs=function(c){var a=this;switch(typeof c){case "string":return c;case "object":if("undefined"!=typeof c.UID)return c.UID;if(c instanceof b.socialize.Collection){var e=[];c.each(function(c,b){var d=a.extractListOfGIGUIDs(c);null!=d&&""!=d&&e.push(d)});
return e.join(",")}}};e.prototype.handleConnectWithoutLoginBehavior=function(c){if("socialize.addConnection"==this.api.methodName){var b=this.params.connectWithoutLoginBehavior;b&&(b=b.toLowerCase());"loginexistinguser"==b&&(this.params.loginIfExists=!0);c||(this.api=a.getApi("socialize.login"),"alwayslogin"!=b&&(this.params.temporary_account=!0))}};e.prototype.filterParams=function(c){this.params=b.utils.object.extractProperties(c,{},this.getFullSchema())};e.prototype.getFullSchema=function(){if(null==
this.api.schema)return"";for(var c=(this.api.schema+"|"+b._.defaultApiSchema).split("|"),a=0;a<c.length;a++){var e=c[a];if(-1!=e.toLowerCase().indexOf("[providercapability=")){for(var d=e.toLowerCase().split("=")[1].split("]")[0],e=e.split("]")[1],d=b.socialize.getProvidersForRequiredCapabilities(b.socialize.getProvidersByName("*"),[d]),f=[],h=0;h<d.length;h++)f.push(d[h].name+e);c[a]=f.join("|")}}return c.join("|")};e.prototype.preprocessServerResponse=function(c){c.userInfo&&0!=this.api.methodName.indexOf("accounts.")&&
("string"==typeof c.userInfo&&(c.userInfo=b.utils.JSON.deserialize(c.userInfo)),c.userInfo&&(c=b.utils.object.merge([c.userInfo,c]),c.errorCode=c.userInfo.errorCode,delete c.userInfo));c.accountInfo&&"string"==typeof c.accountInfo&&(c.accountInfo=b.utils.JSON.deserialize(c.accountInfo),c.accountInfo&&(c=b.utils.object.merge([c.accountInfo,c]),delete c.accountInfo));try{c.settings&&"string"==typeof c.settings&&(c.settings=b.utils.JSON.deserialize(c.settings))}catch(a){}return c};e.prototype.onAfterLogoutMethod=
function(){b.external.backplane.resetChannel()};e.prototype.getExpiredSessionResponse=function(c){switch(this.api.methodName){case "socialize.setUserSettings":this.originalParams.disableLocalSettings||(a.setGigyaSettings(this.params.group,this.params.settings),c=d());break;case "socialize.delUserSettings":this.originalParams.disableLocalSettings||(a.delGigyaSettings(this.params.group,this.params.settings),c=d());break;case "socialize.getUserSettings":if(!this.originalParams.disableLocalSettings){var b=
a.getGigyaSettings(this.params.group);c=d();c.settings=b}break;case "socialize.getUserInfo":c.status="OK";c.statusMessage="";c.errorCode=0;c.statusCode=0;c.errorMessage="";c.errorDetails="";c.statusReason="";break;case "accounts.logout":case "socialize.logout":c=d()}return c};e.prototype.afterServerApiResponse=function(c,e){var d=this;a.checkCompleteRegistration(c,this.originalParams,function(f,h,m){c=f;c=d.preprocessServerResponse(c);if(a.logoutMethods[d.api.methodName]&&0==c.errorCode)d.onAfterLogoutMethod();
403005==c.errorCode&&(c=d.getExpiredSessionResponse(c));0==c.errorCode&&(e||a.loginMethods[d.api.methodName])&&b.utils.cookie.remove("_gigRefUid_"+d.originalParams.APIKey);d.handleMethodResponse(c,function(f){c=f;d.addDefaultResponseProperties(c);a.handleSpecialFields(c);d.logoutFromProvidersIfNeeded(c,function(){h||d.generateEventsFromResponse(c,e);m?d.sendRequest(e):(b.events.global.dispatch({eventName:"afterResponse",methodName:d.api.methodName,filteredParams:d.params,response:c},d.originalParams),
"function"==typeof d.callback&&(b.log.addLog("Calling callback for "+d.api.methodName+" with this response object",c),d.callback(c)),d.api.settings.postprocessor&&d.api.settings.postprocessor(d.originalParams,c))})})})};e.prototype.addDefaultResponseProperties=function(c){delete c.statusCode;delete c.statusReason;c.errorCode=c.errorCode||0;c.status=c.status||(0==c.errorCode?"OK":"FAIL");c.errorMessage=c.errorMessage||"";c.statusMessage=c.statusMessage||c.errorMessage;c.requestParams=this.originalParams;
c.requestParams.password&&delete c.requestParams.password;c.context=this.originalParams.context;var b=this.api.methodName.split(".")[0];c.operation="socialize"==b?this.api.methodName.split(".")[1]:"/"+this.api.methodName};e.prototype.handleMethodResponse=function(c,e){if(0==c.errorCode)switch(this.api.methodName){case "gm.getTopUsers":if(b.localInfo.isIE)for(var d=0;d<c.users.length;d++){var f=c.users[d];f.photoURL&&-1!=f.photoURL.indexOf("apis.live.net")&&(f.photoURL=f.photoURL.replace("https://apis.live.net",
document.location.protocol+"//msnproxy.gigya.com"))}break;case "accounts.socialLogin":case "socialize.login":c.newUser=c.x_newUser?!0:!1,delete c.x_newUser;case "socialize.notifyLogin":case "socialize.addConnection":case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "socialize.getUserInfo":delete c.login_token;delete c.expires_in;delete c.id;c.code&&(c.authCode=c.code,delete c.code);c.authCode||"socialize.notifyLogin"==this.api.methodName&&
this.params.authCode||(d=c,c.userInfo&&(d=c.userInfo,delete c.userInfo),-1==this.api.methodName.indexOf("accounts.")?(c={user:d},b.utils.object.extractProperties(d,c,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|settings|context|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|newUser"),c.user.hasOwnProperty("UIDSig")&&(c.signature=c.user.UIDSig),d.profile&&delete d.profile,d.data&&delete d.data,delete d.status,delete d.statusMessage,delete d.callId,delete d.errorCode,
delete d.errorMessage,delete d.errorDetails,delete d.settings,delete d.context):c!=d&&(c.user=d),""==d.age||isNaN(parseInt(d.age))||(d.age=parseInt(d.age)),d.suppressEvents&&(c.suppressEvents=!0),"string"==typeof d.capabilities&&((f=d.capabilities)||(f=""),"object"!=typeof d.capabilities&&(d.capabilities={}),f=f.toLowerCase(),d.capabilities={actions:-1<f.indexOf("actions"),friends:-1<f.indexOf("friends"),login:-1<f.indexOf("login"),status:-1<f.indexOf("status"),notifications:-1<f.indexOf("notifications"),
contacts:-1<f.indexOf("contacts"),photos:-1<f.indexOf("photos")}),a.convertIdentitiesArrayToObject(d),"string"==typeof d.providers&&(d.providers=d.providers.split(",")),this.params.group&&!c.settings&&(d=a.getGigyaSettings(this.params.group),c.settings=d));break;case "socialize.getAvailableProviders":f={};for(d=0;d<c.availableProviders.length;d++)f[c.availableProviders[d].name]=c.availableProviders[d];c.availableProviders=f}"socialize.removeConnection"==this.api.methodName&&0==c.errorCode?b.socialize.getUserInfo(this.originalParams,
{callback:function(c){e(c)}}):e(c)};e.prototype.logoutFromProvidersIfNeeded=function(c,d){var e;c.connectedProviders?e=c.connectedProviders.toLowerCase():c.provider&&(e=c.provider.toLowerCase());if(a.logoutMethods[this.api.methodName]&&e&&!b.utils.validation.isExplicitFalse(this.originalParams.forceProvidersLogout)){var f=e.split(","),h=0,m=!1,l=function(){m||d();m=!0};window.setTimeout(l,5E3);for(e=0;e<f.length;e++)this.logoutFromProvider(f[e],function(){h++;h==f.length&&l()})}else d()};e.prototype.logoutFromProvider=
function(c,a){var d="",e=!1,f=!0;switch(c){case "facebook":if(b.providersConfig.facebook){b.socialize.waitForService({service:"facebook",callback:function(){b.external.facebook.isLoggedIn&&FB.logout?FB.logout(function(){b.external.facebook.refreshSession();a()}):a()}});return}break;case "yahoo":d="https://login.yahoo.com/config/login?.src=fpctx&amp;logout=1&r=";break;case "google":d="https"==b.thisScript.protocol?"https://google.com/accounts/Logout?r=1":"https://www.google.com/accounts/Logout?r=",
e=!0}0==c.indexOf("saml-")&&(d=c.substring(5),d="https://"+(b.partnerSettings.customAPIDomainPrefix?b.partnerSettings.customAPIDomainPrefix+"."+b.partnerSettings.baseDomain:"fidm."+b.partnerSettings.plugins.apiDomain)+"/saml/v2.0/"+this.params.APIKey+"/sp/jsslo?name="+encodeURIComponent(d),e=!0,f=!1);if(d){f&&(d+=(new Date).getTime());var h;if(e){var l=document.createElement("iframe");l.style.width="30px";l.style.height="10px";l.style.position="absolute";l.style.top="-1000px";l.style.left="-1000px";
h=function(c){var b;b=c&&c.srcElement?c.srcElement:c&&c.target?c.target:this;!b.loaded&&b.parentNode&&(b.loaded=!0,a(),window.setTimeout(function(){try{document.body.removeChild(b)}catch(c){}},5E3))};l.addEventListener?(l.addEventListener("load",h,!1),l.addEventListener("error",h,!1)):l.attachEvent&&(l.attachEvent("onload",h),l.attachEvent("onerror",h),l.onerror=l.onload=l.onreadystatechange=function(c){l.readyState&&"loaded"!=l.readyState&&"complete"!=l.readyState||h(c)},l.onerror=h);l.src=d;b.utils.DOM.appendToBody(l)}else e=
new Image,h=function(){this.loaded||(this.loaded=!0,a())},e.onload=h,e.onerror=h,e.src=d}else a()};e.prototype.generateEventsFromResponse=function(c,d){var e=this,f;if(0==c.errorCode)switch(this.api.methodName){case "accounts.logout":case "socialize.logout":case "socialize.unlinkAccounts":case "socialize.deleteAccount":f={eventName:"logout,accounts.logout"};break;case "socialize.linkAccounts":case "socialize.setUID":a.addUserInfoToEvent(c,f,!0);break;case "socialize.removeConnection":f={eventName:"connectionRemoved,disconnect",
provider:this.params.provider||""};a.addUserInfoToEvent(c,f);break;case "socialize.addConnection":!d&&c.user.isLoggedIn?(f={eventName:"login",provider:this.params.provider},a.addUserInfoToEvent(c,f,!0)):(f={eventName:"connectionAdded,connect",provider:this.params.provider},a.addUserInfoToEvent(c,f));break;case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "accounts.socialLogin":this.dispatchAccountsLoginEvent(c);case "socialize.finalizeRegistration":case "socialize.register":case "socialize.login":if(!c.user&&
!c.authCode)break;f={eventName:"login"};var h=this.params.provider;if(!h&&c.providerSessions)for(var m in c.providerSessions){h=m;break}f.provider=h||"site";f.loginMode=this.originalParams.loginMode||"standard";c.authCode&&(f.authCode=c.authCode);a.addUserInfoToEvent(c,f,!0);c.user&&h&&(h=h.toLowerCase(),b.utils.cookie.set("_gig_llp",h),b.utils.cookie.set("_gig_llu",c.user.firstName||""));break;case "socialize.notifyLogin":this.params.authCode||(f||(f={eventName:"login"}),f.provider="site",a.addUserInfoToEvent(c,
f,!0));break;case "gm.notifyAction":b.events.global.dispatch({eventName:"actionNotified",isInternal:!0})}a.loginMethods[this.api.methodName]&&this.originalParams.redirectURL&&f&&f.user&&0==c.errorCode&&b.utils.redirect(this.originalParams.redirectURL,[f,f.user],this.originalParams.redirectMethod);0==c.errorCode&&f&&"login"==f.eventName&&!c.profile&&b.events.global._activeNamespaces.accounts&&-1==this.api.methodName.indexOf("accounts")&&b.accounts.getAccountInfo(this.originalParams,{include:"profile,data",
includeUserInfo:!1,callback:function(c){e.dispatchAccountsLoginEvent(c)}});null!=f&&(f.context=this.originalParams.context,b.events.global.dispatch(f,this.originalParams))};e.prototype.dispatchAccountsLoginEvent=function(c){var a={eventName:"accounts.login",remember:b.utils.validation.isExplicitTrue(this.originalParams.remember),provider:this.originalParams.provider?this.originalParams.provider.toLowerCase():""};b.utils.object.extractProperties(c,a,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");
b.events.global.dispatch(a,this.originalParams)};return e}();a.ServerApiRequest=f})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(a){a.__pluginsCoreLoaded=!1;var d={showReactionsBarUI:["barID"],showCommentsUI:["categoryID","streamID"],showFeedUI:["feedID"],showChatUI:["configID","streamID","chatID"]},h=function(f){function e(c,b,a,d,e,h){"undefined"===typeof a&&(a={});"undefined"===typeof d&&(d={});"undefined"===typeof e&&(e="");"undefined"===typeof h&&(h={});f.call(this,h.apiName||b.split(".")[0]+"."+c,h);this.methodName=c;this.jsName=b;this.settings=h;h.defaultParams=a||{};h.defaultPopupParams=d||{};
h.requiredParams=e||""}__extends(e,f);e.versionSelector=function(c,a,d,e){var f=this;b.utils.functions.createAlias("gigya."+a+"."+c,function(){for(var a=[],g=0;g<arguments.length-0;g++)a[g]=arguments[g+0];var h=a[0],g=a[1];g||(g=h,h=null);g||(g={},a.push(g));var h=b.utils.object.merge([{},h,g]).version||d,r=e[h]||e[d];if(r){var s=eval(r);g.originalMethodName=c;g.selectedMethodName=r;g.ctag=c+"_v"+h;return s.apply(f,a)}throw Error("unsupported version: "+(a.version||d));})};e.createApi=function(c,
b,a,d,f,h){"undefined"===typeof f&&(f={});f.useBasePlugin=!0;c=new e(c,d,null,null,null,f);c.namespace=b;c.className=a;c.instanceMethods=h||[];c.addInstanceMethodAliases();return c};e.prototype.addInstanceMethodAliases=function(){for(var c=this,d=0;d<this.instanceMethods.length;d++){var e=this.instanceMethods[d];b.utils.functions.createAlias("gigya."+this.namespace+"."+e,function(b){if(c.injectionInfo&&c.injectionInfo.instanceMethods[e]){var d=a.plugins.getPluginInstance(b,c.injectionInfo);if(d instanceof
c.pluginType)c.injectionInfo.instanceMethods[e](d,b)}})}};e.prototype.preprocessRequest=function(c,b){var a=this;f.prototype.preprocessRequest.call(this,c,function(){c.source||a.setSourceData(c);b&&b()})};e.prototype.run=function(c){var a=this;!this.settings.waitForAPIQueue||c.ignoreApiQueue?this.startUI(c):b.utils.queue.queueForExecution("API",function(){a.startUI(c)})};e.prototype.startUI=function(c){var a=this;f.prototype.run.call(this,c);c=b.utils.object.clone(c);this.prepareParameters(c);this.preprocessRequest(c,
function(){a.settings.useBasePlugin?a.loadPluginJS(c,function(d){b.utils.queue.queueForExecution("UI",function(){d&&a.className&&(a.pluginType=eval("gigya._.plugins."+a.className),a.injectionInfo=a.pluginType.injectionInfo(a));var e=function(){a.startPlugin(c)};!1==c.waitForDebug?e():b.utils.queue.queueForExecution("debug",e)})}):a.legacyStartUI(c)})};e.prototype.startPlugin=function(c){b.events.global.dispatch({eventName:"beforePluginRequest",methodName:this.methodName,params:c},c);var d=c.originalMethodName||
this.methodName;b.log.logCall(d,c);b.reports.reportLoad(d,c);this.pluginType?(c&&(d=a.plugins.getPluginInstance(c,this.injectionInfo))&&d.dispose&&d.dispose(),d=new this.pluginType(c,this.injectionInfo),a.plugins.setPluginInstance(c,this.injectionInfo,d),d.start()):b.utils.functions.callFunction("gigya."+this.jsName+"."+this.methodName,[c,c,c])};e.prototype.loadPluginJS=function(c,d){if(this.wasPluginJSLoaded(c))d&&d(!1);else{var e=b._.getCdnResource("/js/"),f=!1,h="gigya.services."+this.jsName;a.__pluginsCoreLoaded?
e+=h+".min.js"+(c.lang?"?lang="+c.lang:""):(e+="gigya.services.plugins.base.min.js?services="+h+(c.lang?"&lang="+c.lang:""),f=a.__pluginsCoreLoaded=!0,b.utils.queue.hold("pluginsJS","UI"));b.utils.script.load(e,null,function(){f&&b.utils.queue.release("pluginsJS","UI");d&&d(!0)},!0)}};e.prototype.wasPluginJSLoaded=function(c){var a="gigya."+this.jsName+"."+this.methodName,d="gigya.services."+this.jsName+".js";try{var e=eval(a),f=b.i18n[d][c.lang]}catch(h){return!1}return"undefined"!=typeof e&&"undefined"!=
typeof f};e.prototype.setSourceData=function(c){c.source="socialize.showSimpleShareUI"==this.methodName?"socialize.showShareUI":c.originalMethodName||this.methodName;if(!c.sourceData&&d[this.methodName]){for(var b={},a,e=0;e<d[this.methodName].length;e++){var f=d[this.methodName][e];null!=c[f]&&(a=!0,b[f]=c[f])}a&&(c.sourceData=b)}c.pluginsStack||(c.pluginsStack=[]);c.pluginsStack.push({source:this.methodName});c.lastSource=this.methodName};e.prototype.validateRequiredParams=function(c){for(var a=
this.settings.requiredParams.split("|"),d=0;d<a.length;d++){var e=a[d];if(""!=e&&(null==c[e]||""==c[e]))return b.events.dispatchInvalidParamError(c,e),!1}return!0};e.prototype.setDefaultParams=function(c){var b=!c.containerID||c.isPopup,a;for(a in this.settings.defaultParams)null==c[a]&&(c[a]=b&&this.settings.defaultPopupParams[a]?this.settings.defaultPopupParams[a]:this.settings.defaultParams[a]);if(b)for(a in this.settings.defaultPopupParams)c[a]||(c[a]=this.settings.defaultParams[a])};e.prototype.prepareParameters=
function(c){for(var a in c)-1!=a.toLowerCase().indexOf("provider")&&"string"==typeof c[a]&&(c[a]=b._.providers.replaceProviderAliases(c[a]));c.lang||(c.lang=b.thisScript.lang.langCode)};e.prototype.legacyStartUI=function(c){var a=this,d=c.containerID;if(this.settings.ignoreContainerId)d=c.containerID="";else if(null==c.containerID&&!this.settings.allowPopup||c.containerID&&!document.getElementById(c.containerID)){b.events.dispatchInvalidParamError(c,"containerID");return}c.source?c.isPopup=!1:this.setSourceData(c);
var e=this.settings.allowPopup&&(!d||c.isPopup);e&&this.settings.useNewModal&&(c.useNewModal=!0);this.setDefaultParams(c);this.settings.allowPopup||e||b.utils.DOM.clearByID(d);this.validateRequiredParams(c)&&this.loadPluginJS(c,function(){var d=function(){a.prepareContainer(c,e,function(){a.startPlugin(c)})};b.utils.queue.queueForExecution("UI",function(){!1==c.waitForDebug?d():b.utils.queue.queueForExecution("debug",d)})})};e.prototype.prepareContainer=function(c,a,d){var e=this;if(document.body){var f=
c.containerID;a&&(f=b.utils.DOM.getCenteredDivID(this.methodName),c.newModal&&(f+=(new Date).getTime()),c.containerID=f,c.isPopup=!0,document.getElementById(f)||b.utils.DOM.createTopLevelDiv(f));var h=document.getElementById(f);if(h){var l=h.Reqs?h.Reqs:h.Reqs=[],t=l.length+"@0@"+f;c.rid=t;l[l.length]={rid:t,container:h,method:this.methodName,context:c.context,c:c,p:c,i:c,operation:this.methodName,isHTML:!0};if(h&&h.style){h.style.display="";h.style.visibility="";if(f=document.getElementById("gigya_ifr_"+
f))f.style.display="",f.style.visibility="";null!=f&&(b.utils.DOM.setSize(f,c.width,c.height,a),f.style.visibility="visible");b.utils.DOM.setSize(h,c.width,c.height,a)}f=this.methodName.split(".").pop();h.setAttribute&&h.setAttribute("gigid",(c.source&&c.source!=f?c.source+"_":"")+f)}else b.events.dispatchInvalidParamError(c,"containerID");d()}else window.setTimeout(function(){e.prepareContainer(c,a,d)},200)};return e}(a.BaseApi);a.UiApi=h})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(b){(function(b){function a(b,d){return b.isPopup?"gigya-modal-plugin-container-"+d.methodName:b.containerID}b.instances={};b.getPluginInstance=function(f,e){return b.instances[a(f,e)]};b.setPluginInstance=function(f,e,c){b.instances[a(f,e)]=c};b.removePluginInstance=function(f,e){delete b.instances[a(f,e)]}})(b.plugins||(b.plugins={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(a){(function(a){a.registerPlugin=function(a){b.utils.queue.queueForExecution("UI",a)};a.attachPlugin=function(a,d,e,c){d||(d="socialize");b[d]||(b[d]={});b[d].plugins||(b[d].plugins={});b[d].plugins[e]||(b[d].plugins[e]={instances:[]});var g=b[d].plugins[e];g[c]||(g[c]=function(b){b=new a(b,"gigya."+d+".plugins."+e+".instances["+g.instances.length+"]");g.instances.push(b)});if(a.StaticApi)for(var k in a.StaticApi)b.utils.functions.createAlias("gigya."+d+".plugins."+e+"."+k,
a[a.StaticApi[k]])}})(a.UI||(a.UI={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(a){b.socialize.addEventHandlers=function(){for(var a=[],c=0;c<arguments.length-0;c++)a[c]=arguments[c+0];var a=b.utils.object.merge([b.thisScript.globalConf,a]),c=a.namespace?a.namespace:"socialize",d;for(d in a)0==d.indexOf("on")&&b.events.global.add(d,a[d],a.listenerType,a.context,c);"function"==typeof a.callback&&a.callback({status:"OK",statusMessage:"",errorCode:0,errorMessage:"",operation:"addEventHandlers",context:a.context})};b.accounts.addEventHandlers=function(){for(var a=
[],c=0;c<arguments.length-0;c++)a[c]=arguments[c+0];a=b.utils.object.merge([a,{namespace:"accounts"}]);b.socialize.addEventHandlers(a)};b.socialize.isLoggedIn=function(){var a=b.utils.object.merge([b.thisScript.globalConf,arguments]);b.socialize.getUserInfo(a,{callback:function(c){var d=c.user,d={loggedIn:d?b.utils.validation.isExplicitTrue(d.isLoggedIn):!1};b.utils.object.extractProperties(c,d,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|context");a.callback&&a.callback(d)}})};
b.socialize.waitForService=function(){var a=b.utils.object.merge([b.thisScript.globalConf,arguments]),c=a.service;if(c){var c=c.toLowerCase(),d=a.callback;if("fbconnect"==c||"facebook"==c)b.external.facebook.isLoaded()?d({context:a.context}):b.socialize.addEventHandlers({listenerType:"component"},{onFacebookLoaded:d,context:a.context});"googleplus"==c&&(b.external.googlePlus.isLoaded()?d({context:a.context}):b.socialize.addEventHandlers({listenerType:"component"},{onGooglePlusLoaded:d,context:a.context}))}};
var d={facebook:{w:640,h:370},twitter:{w:880,h:585},messenger:{w:710,h:905},linkedin:{w:560,h:500},yahoobookmarks:{w:840,h:975},digg:{w:1010,h:1045},delicious:{w:890,h:905},googlebookmarks:{w:710,h:905},mixi:{w:640,h:470},googleplus:{w:496,h:420}};b.socialize.postBookmark=function(){var e=b.utils.object.merge([b.thisScript.globalConf,arguments]);e.APIKey||(e.APIKey=b.thisScript.APIKey);var c={};b.utils.object.extractProperties([e],c,a.postBookmarkSchema);c.sdk="js_"+b.build.version;if(!c.URL&&!c.url&&
c.userAction&&!c.userAction.linkBack)for(var f=document.getElementsByTagName("meta"),h=0;h<f.length;h++)if("og:url"==f[h].getAttribute("property")&&f[h].getAttribute("content")){c.URL=f[h].getAttribute("content");break}c.URL||c.url||!c.userAction||c.userAction.linkBack||(c.URL=document.location.href);delete c.context;c.provider||(c.provider="");c.providerKey||"facebook"==c.provider.toLowerCase()&&(c.providerKey=b.external.opengraph.getMetaTag("fb:app_id"));b._.apiAdapter.getGmidTicket(function(a){a&&
(c.gmidTicket=a);a=b.utils.keyValue.serialize(c);var f=d[c.provider.toLowerCase()],g=e.enablePopupLocation?"location=1,toolbar=1":null;f&&f.w&&f.h&&(g=(e.enablePopupLocation?"location=1,toolbar=1,":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+f.w+",height="+f.h);b.log.logCall("postBookmark",c);b.utils.win.open(b.utils.stringUtils.format("https://socialize.{0}/gs/bookmark.aspx?{1}",b.partnerSettings.plugins.apiDomain,a),"gs_bookmark_"+c.provider,g)})};b.socialize.refreshUI=function(){var d=
b.utils.object.merge([b.thisScript.globalConf,arguments]),c=d.callback;b.socialize.getUserInfo(d,{callback:function(f){var h={eventName:"login",isInternal:!0};d.provider&&(h.provider=d.provider);a.addUserInfoToEvent(f,h,!0);d.context&&(h.context=d.context);b.events.global.dispatch(h);"function"==typeof c&&c(f)}})};var h={"digg.com":"digg","stumbleupon.com":"stumbleupon","delicious.com":"delicious","technorati.com":"technorati","t.co":"twitter","plus.url.google.com":"googlePlus","facebook.com":"facebook",
"linkedin.com":"linkedIn","pinterest.com":"pinterest","mixi.jp":"mixi","b.hatena.ne.jp":"hatena","line.me":"line"},f;b.socialize.trackReferrals=function(){var d=b.utils.object.merge([b.thisScript.globalConf,arguments]),c={eventName:"linkback",CID:d.cid},g={},k={};-1!=document.location.href.indexOf("#")&&(k=b.utils.keyValue.deserialize(document.location.href.split("#")[1]));-1!=document.location.href.indexOf("?")&&(g=b.utils.keyValue.deserialize(document.location.href.split("?")[1].split("#")[0]));
k.guid&&"_"!=k.guid&&b.utils.cookie.set("_gigRefUid_"+d.APIKey,k.guid);var p=k._giguuid||g._giguuid;p&&b.utils.cookie.set("_gigRefUid_"+d.APIKey,p);if(p=null!=k._gus||null!=g._gus)c.CID=k._gucid||g._gucid,c.shortCode=k._gsc||g._gsc,c.provider=k._gup||g._gup;if(!f){var n,k={url:document.location.href,ref:document.referrer};g.fb_ref?(n=b.utils.keyValue.deserialize(g.fb_ref,":"),k.uuid=n.uu,k.sn=n.p,n=n.s):document.referrer&&-1!=document.referrer.indexOf("://")&&(g=document.referrer.split("://")[1].split("/")[0],
0==g.indexOf("www.")&&(g=g.split("www.")[1]),h[g]&&(c.provider=k.sn=h[g]));k.sn||document.referrer&&(-1!=document.referrer.indexOf("http://soc.li")||-1!=document.referrer.indexOf("https://shr.gs"))||(g=document.location.href.split("#guid="),1<g.length&&(g=g[1].split("#")[0].split("&")[0],g!=a.apiAdapter.getTokenParam(d.APIKey,"UUID")&&(k.sn="AddressBarShares",k.uuid=g,"_"==g&&delete k.uuid,document.location.replace("#"),b.reports.trackAddressBarShares(),k.url=document.location.href.split("#")[0])));
k.uuid&&b.utils.cookie.set("_gigRefUid_"+d.APIKey,k.uuid);k.sn&&!p&&b.reports.report("linkback",d.APIKey,d.cid,n,null,k);(k.sn||p)&&b.events.global.dispatch(b.utils.object.removeUndefined(c));f=!0}"function"==typeof d.callback&&d.callback({status:"OK",statusMessage:"",operation:"trackReferrals",context:d.context,errorMessage:"",errorCode:0})};b.socialize.hideUI=function(){var a=b.utils.object.merge([b.thisScript.globalConf,arguments]);"function"==typeof a.callback&&a.callback({status:"OK",statusMessage:"",
operation:"hideUI",context:a.context,errorMessage:"",errorCode:0})};b.gcs.submitUserForm=function(){var a={},c=b.utils.object.merge([b.thisScript.globalConf,arguments]),d=document.getElementById(c.form);if(!d){var f=document.getElementsByName(c.form);f&&0<f.length&&(c.form=f[0])}for(f=0;f<d.elements.length;f++){var h=d.elements[f];if(h.name){for(var n=h.name.split("."),m=a,l=0;l<n.length-1;l++){var t=n[l];m[t]||(m[t]={});m=m[t]}m[n[n.length-1]]=h.value}}c.data=a;b.gcs.setUserData(c)};b.socialize.getProviderShareCounts=
function(){var a=b.utils.object.merge([b.thisScript.globalConf,arguments]);b.utils.script.load(b._.getCdnResource("/js/gigya.services.socialize.plugins.shareCounts.min.js"),null,function(){b.socialize.plugins.shareCounts.getProviderShareCounts(a)},!0)}})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(a){a.defaultApiSchema="ctag|APIKey|cid|oauth_token|source|sourceData|usePost|refUID|fb_UID|fb_at|fb_exp";a.defaultOauthSchema="ctag|temporary_account|authFlow|connectWithoutLogin|provider|redirectMethod|redirect_uri|pendingRegistration|lang|regSource|extraPermissions|sessionExpiration|forceAuthentication|includeiRank|includeAllIdentities|extraFields|enabledProviders|disabledProviders|signIDs|openIDUsername|openIDURL|openIDProviderLogo|openIDProviderName|finalizeRegistration|include|actionAttributes|profileAttributes|googlePlayAppID|bp_channel_url|loginIfExists|includeUserInfo|redirectURL|authCodeOnly|enablePopupLocation|invite|regToken|loginMode|apiDomain|conflictHandling";a.postBookmarkSchema=
"provider|URL|url|title|description|target|cid|APIKey|shortURLs|source|sourceData|providerKey|thumbnailURL|tags|userAction|[providerCapability=actions]UserAction|actionAttributes|facebookDialogType";a.loginMethods={"socialize.login":1,"socialize.addConnection":1,"socialize.notifyLogin":1,"socialize.linkAccounts":1,"accounts.login":1,"accounts.socialLogin":1,"accounts.linkAccounts":1,"accounts.register":1,"accounts.finalizeRegistration":1};var d=function(b){return"link"!==b.loginMode&&"reAuth"!==b.loginMode},
h=function(b,a){a()};a.logoutMethods={"socialize.logout":1,"accounts.logout":1,"socialize.deleteAccount":1,"socialize.unlinkAccounts":1};a.arApiList=[new a.ServerApi("socialize.login",a.defaultOauthSchema,!1,{oauth:!0},{preprocessor:h,clearSessionCondition:d,forceHttps:!0}),new a.ServerApi("socialize.addConnection",a.defaultOauthSchema,!1,{oauth:!0},{forceHttps:!0}),new a.ServerApi("socialize.requestPermissions",a.defaultOauthSchema,!1,{oauth:!0},{requiresSession:!0}),new a.ServerApi("accounts.socialLogin",
a.defaultOauthSchema,!1,{oauth:!0},{preprocessor:h,clearSessionCondition:d,forceHttps:!0}),new a.UiApi("showDebugUI","socialize.plugins.debug",{},{},"",{allowPopup:!0}),a.UiApi.createApi("showRatingUI","comments","rating.RatingPlugin","comments.plugins.rating"),new a.UiApi("showCommentsUI","comments.plugins.comments",{width:500},{},"",{preprocessor:function(a,d){a.ctag=2!=a.version?"comments_v1":"comments_v2";2==a.version&&b.utils.browser.isModern()?b.comments.showCommentsUI2(a):d()}}),new a.UiApi("showCommentsUI",
"comments.plugins.comments2",{width:500},{},"",{apiName:"comments.showCommentsUI2"}),new a.UiApi("showShareUI","socialize.plugins.share",{width:520,height:320},{width:595,height:324},"userAction",{allowPopup:!0,preprocessor:function(d,e){var c=d.operationMode;c&&(c=c.toLowerCase().replace(/ /g,""));d.containerID||(delete d.width,delete d.height);a.apiAdapter.isSessionValid(d,function(a){"simpleshare"==c||"autodetect"==c&&!a?b.socialize.showSimpleShareUI(d):e()})}}),a.UiApi.createApi("showMessageUI",
"_","messages.MessagesPlugin","_.plugins.messages"),new a.UiApi("showLoginUI_v1","socialize.plugins.login",{width:120,height:110},{width:280,height:220},"",{allowPopup:!0}),a.UiApi.createApi("showLoginUI_v2","socialize","login_v2.LoginPlugin","socialize.plugins.login_v2"),a.UiApi.versionSelector("showLoginUI","socialize","1",{1:"gigya.socialize.showLoginUI_v1",2:"gigya.socialize.showLoginUI_v2"}),new a.UiApi("showAddConnectionsUI_v1","socialize.plugins.login",{width:110,height:65},{width:250,height:200},
"",{allowPopup:!0}),a.UiApi.createApi("showAddConnectionsUI_v2","socialize","login_v2.LoginPlugin","socialize.plugins.login_v2"),a.UiApi.versionSelector("showAddConnectionsUI","socialize","1",{1:"gigya.socialize.showAddConnectionsUI_v1",2:"gigya.socialize.showAddConnectionsUI_v2"}),new a.UiApi("showFriendSelectorUI","socialize.plugins.friendSelector",{width:400,height:360},{},"",{allowPopup:!0}),new a.UiApi("showFeedUI","socialize.plugins.newsfeed",{width:304,height:265}),new a.UiApi("showChatUI",
"chat.plugins.chat",{width:300,height:450},{},"",{preprocessor:function(b,a){b.site&&(b.categoryID=b.site);b.stream&&(b.streamID=b.stream);b.skin&&(b.skinID=b.skin);b.streamID=b.streamID||0;a()}}),a.UiApi.createApi("showEditConnectionsUI","socialize","editConnections.EditConnectionPlugin","socialize.plugins.edit"),new a.UiApi("showShareBarUI","socialize.plugins.reactions",{shareCountCacheTimeout:3E5},{},"userAction|shareButtons"),new a.UiApi("showReactionsBarUI","socialize.plugins.reactions",{},{},
"userAction|barID|reactions",{preprocessor:function(b,a){b.barID||(b.barID=b.itemID);a()}}),new a.UiApi("showMiniShareUI","socialize.plugins.minishare",{width:320,height:153},{},"",{allowPopup:!0}),new a.UiApi("showFollowBarUI","socialize.plugins.followbar",{},{},"buttons"),new a.UiApi("showBookmarkUI","socialize.plugins.bookmark",{width:310,height:250},{width:310,height:310}),new a.UiApi("showSimpleShareUI","socialize.plugins.simpleShare",{width:280,height:175},{},"userAction",{allowPopup:!0,dontLoadPluginsCore:!0,
waitForAPIQueue:!0}),new a.UiApi("showShareMobileUI","socialize.plugins.shareMobile",{},{},"userAction",{allowPopup:!0}),new a.UiApi("showUserStatusUI","gm.plugins.userStatus",{width:300,hidePoints:!1,hideActions:!1},{},"",{requireSession:!0}),new a.UiApi("showAchievementsUI","gm.plugins.achievements",{width:300,height:100,excludeChallenges:"_default"}),new a.UiApi("showChallengeStatusUI","gm.plugins.achievements",{width:300,height:100,challenge:"_default"}),new a.UiApi("showLeaderboardUI","gm.plugins.leaderboard",
{width:300},{},"",{preprocessor:function(b,a){b&&b.height&&(b.height=null);a()}}),new a.UiApi("showNotifications","gm.plugins.notifications",{},{},"",{preprocessor:function(a,d){var c=b.utils.localStorage.getObject("gmSettings");c&&c.disableNotifications||(a.containerID="gigNotifications",document.getElementById(a.containerID)||(c=document.createElement("div"),c.id=a.containerID,c.style.position="absolute",c.style.left="-1000px",b.utils.DOM.appendToBody(c)),d())}}),new a.UiApi("showTfaUI","accounts.plugins.tfa",
{width:325}),new a.UiApi("showScreenSet","accounts.plugins.screenSet",{},{},"screenSet",{allowPopup:!0}),new a.UiApi("hideScreenSet","accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new a.UiApi("switchScreen","accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new a.ServerApi("socialize.getAvailableProviders","enabledProviders|disabledProviders|requiredCapabilities"),new a.ServerApi("socialize.notifyLogin","siteUID|UIDTimestamp|UIDSig|UIDNonce|provider|authToken|tokenSecret|regSource|tokenExpiration|sessionHandle|sessionHandleExpiration|userInfo|providerSessions|sessionExpiration|authCode|includeAllIdentitiesincludeiRank|group|settings|extraFields|signIDs|newUser|actionAttributes|profileAttributes|bp_channel_url",
!1,void 0,{forceHttps:!0,clearSession:!0}),new a.ServerApi("socialize.shortenURL","URL"),new a.ServerApi("socialize.convertAction","userAction|[providerCapability=actions]UserAction|provider"),new a.ServerApi("socialize.getReactionsCount","barID|buttonIDs|reportLoad"),new a.ServerApi("socialize.incrementReactionsCount","barID|buttonID|count|actionAttributes|profileAttributes"),new a.ServerApi("socialize.deleteAccount",void 0,!0),new a.ServerApi("socialize.delUserSettings","group|settings",!0),new a.ServerApi("socialize.getAlbums",
"type|enabledProviders|disabledProviders",!0),new a.ServerApi("socialize.getContacts","enabledProviders|disabledProviders",!0),new a.ServerApi("socialize.getFriendsInfo","enabledProviders|disabledProviders|detailLevel|UIDs|siteUsersOnly|requiredCapabilities|signIDs",!0),new a.ServerApi("socialize.getPhotos","enabledProviders|disabledProviders|albumIDs|tags",!0),new a.ServerApi("socialize.getRawData","provider|UID|fields|dataFormat",!0),new a.ServerApi("socialize.getSessionInfo","provider|paddingMode|encrypt|signIDs|encryptAll",
!0),new a.ServerApi("socialize.getUserInfo","enabledProviders|disabledProviders|signIDs|includeiRank|includeAllIdentities|extraFields|group|settings|includeOpenidUID",!0),new a.ServerApi("socialize.getUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new a.ServerApi("socialize.getPlaces","enabledProviders|disabledProviders|latitude|longitude|query|radius|unifyResults",!0),new a.ServerApi("socialize.checkin","enabledProviders|disabledProviders|placeID|comment|latitude|longitude|actionAttributes|profileAttributes",
!0),new a.ServerApi("socialize.logout","signIDs",!0,{preprocessor:function(a,d){b.partnerSettings.ssoKey&&(a.signIDs=!0);d()}}),new a.ServerApi("socialize.notifyRegistration","siteUID|UIDTimestamp|UIDSig",!0),new a.ServerApi("socialize.publishUserAction","userAction|[providerCapability=actions]UserAction|enabledProviders|disabledProviders|target|shortURLs|scope|privacy|feedID|userLocation|tags|actionAttributes|profileAttributes",!0),new a.ServerApi("socialize.removeConnection","provider|lastIdentityHandling|removeLoginID",
!0),new a.ServerApi("socialize.sendNotification","recipients|body|subject|shortURLs|actionAttributes|profileAttributes",!0),new a.ServerApi("socialize.setStatus","shortURLs|status|[providerCapability=status]Status|enabledProviders|disabledProviders|userLocation|actionAttributes|profileAttributes",!0),new a.ServerApi("socialize.setUID","siteUID|UIDTimestamp|UIDSig",!0),new a.ServerApi("socialize.setUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new a.ServerApi("socialize.unlinkAccounts",
void 0,!0),new a.ServerApi("socialize.getFeed","feedID|startTS|endTS|groups|limit|includeUID"),new a.ServerApi("socialize.sendEmail","dontSendEmail|companyName|lang|emails|emailSubject|emailBody|linkBack|senderEmail|senderName|userMsg|shortURLs|userAction|[providerCapability=actions]UserAction|actionAttributes|profileAttributes|captchaTicket",!1,void 0,{forceHttps:!0}),new a.ServerApi("socialize.facebookGraphOperation","graphPath|graphParams|authRequired|method|authType"),new a.ServerApi("socialize.getTopShares",
"age|tag|limit"),new a.ServerApi("socialize.notifySSOLogin","bp_channel_url"),new a.ServerApi("gm.getChallengeStatus","UID|includeChallenges|excludeChallenges|details|lang|actionAttributes|profileAttributes"),new a.ServerApi("gm.resetLevelStatus","challenges|actionAttributes|profileAttributes",!0),new a.ServerApi("gm.getTopUsers","challenge|totalCount|friendsCount|includeSelf|period|lang|actionAttributes|profileAttributes"),new a.ServerApi("gm.getChallengeConfig","UID|includeChallenges|excludeChallenges|lang|actionAttributes|profileAttributes|expandActions"),
new a.ServerApi("gm.notifyAction","action|operation|challengeIDs|actionAttributes|profileAttributes",!0),new a.ServerApi("comments.updateComment","categoryID|streamID|commentID|commentText|commentTitle|ratings|mediaItems|taggedUsers"),new a.ServerApi("comments.postComment","categoryID|streamID|parentID|guestName|guestEmail|commentText|anonymous|mediaItems|privacy|feedID|userAction|[providerCapability=actions]UserAction|scope|enabledProviders|disabledProviders|shortURLs|commentTitle|ratings|tags|taggedUsers|streamTags|actionAttributes|profileAttributes"),
new a.ServerApi("comments.getComments","categoryID|streamID|includeSettings|start|startTS|threadLimit|sort|threaded|threadDepth|includeStreamInfo|includeOpenidUID|includeUID|includeReplies|tags|dataFormat|markupType|includeUserOptions|includeUserComments|includeRatingsDims|includeUserHighlighting|pinnedCommentID"),new a.ServerApi("comments.setStreamInfo","categoryID|streamID|streamTitle|streamURL|streamInfoSig|streamTags"),new a.ServerApi("comments.getTopStreams","categoryID|limit|maxStreamAge|includeLastComment|streamTag|minRatingsCount"),
new a.ServerApi("comments.getTopRatedStreams","categoryID|limit|maxStreamAge|ratingClass|minRatingsCount|streamTag"),new a.ServerApi("comments.getStreamInfo","categoryID|streamID|streamIDs|includeLastComment|includeRatingsDims|includeRatingDetails"),new a.ServerApi("comments.flagComment","categoryID|streamID|commentID|actionAttributes|profileAttributes"),new a.ServerApi("comments.vote","categoryID|streamID|commentID|vote|actionAttributes|profileAttributes",!0),new a.ServerApi("comments.getUserVotes",
"categoryID|streamID",!0),new a.ServerApi("comments.getUserComments","categoryID|streamID|tag|senderUID|start|limit|sort|includeReplies|includeStreamInfo|includeUserHighlighting",!0),new a.ServerApi("comments.getFriendsComments","categoryID|streamID|start|limit|includeUID|sort|includeReplies|includeStreamInfo",!0),new a.ServerApi("comments.getThread","categoryID|streamID|commentID|start|includeUID|limit|threadDepth|sort"),new a.ServerApi("comments.deleteComment","categoryID|streamID|commentID",!0),
new a.ServerApi("comments.getRelatedUsers","categoryID|streamID|parentCommentID|usernamePrefix|limit"),new a.ServerApi("comments.analyzeMediaItem","categoryID|urls"),new a.ServerApi("comments.subscribe","categoryID|streamID|email|lang"),new a.ServerApi("comments.unsubscribe","categoryID|streamID|unsubscribeToken"),new a.ServerApi("comments.setUserOptions","replyNotifications|notificationsEmail|notificationsLanguage",!0),new a.ServerApi("comments.getUserOptions","ServerApiKey",!0),new a.ServerApi("gcs.getUserData",
"type|fields",!0),new a.ServerApi("gcs.setUserData","data|type|updateBehavior",!0),new a.ServerApi("gcs.search","expTime|querySig|query"),new a.ServerApi("gcs.getSchema","schemaType"),new a.ServerApi("chat.getSettings","categoryID|streamID|skinID"),new a.ServerApi("chat.getMessages","categoryID|streamID|start|includeSettings|chatSignature"),new a.ServerApi("chat.postMessage","categoryID|streamID|messageText|isPrivate|actionAttributes|profileAttributes",!0),new a.ServerApi("chat.resetChat","categoryID|streamID|timestamp|chatSignature"),
new a.ServerApi("chat.blockUser","categoryID|streamID|UID|chatSignature"),new a.ServerApi("chat.blockIP","categoryID|streamID|ip|chatSignature"),new a.ServerApi("chat.deleteMessage","categoryID|streamID|messageId|chatSignature"),new a.ServerApi("accounts.login","loginID|password|sessionExpiration|targetEnv|regToken|include|actionAttributes|profileAttributes|includeUserInfo|includeDynamicSchema|bp_channel_url|captchaToken|captchaText|loginMode",!1,void 0,{preprocessor:h,clearSessionCondition:d,forceHttps:!0,
forcePost:!0}),new a.ServerApi("accounts.linkAccounts","loginID|password|sessionExpiration|targetEnv|include|regToken|includeUserInfo|bp_channel_url",!1,void 0,{forceHttps:!0,forcePost:!0}),new a.ServerApi("accounts.initRegistration","sdk",!1,void 0,{clearSession:!0}),new a.ServerApi("accounts.register","username|email|password|UID|regToken|siteUID|secretQuestion|secretAnswer|regSource|profile|data|captchaText|captchaToken|lang|hashedPassword|pwHashAlgorithm|skipVerification|finalizeRegistration|targetEnv|sessionExpiration|include|actionAttributes|profileAttributes|includeUserInfo|bp_channel_url",
!1,void 0,{forceHttps:!0,forcePost:!0}),new a.ServerApi("accounts.finalizeRegistration","regToken|targetEnv|include|includeUserInfo|bp_channel_url|allowAccountsLinking"),new a.ServerApi("accounts.captchaImage","regToken"),new a.ServerApi("accounts.importProfilePhoto","regToken|URL|publish"),new a.ServerApi("accounts.setProfilePhoto","regToken|publish|photoBytes"),new a.ServerApi("accounts.resetPassword","lang|loginID|passwordResetToken|secretAnswer|securityFields|newPassword|email",!1,void 0,{forceHttps:!0,
forcePost:!0}),new a.ServerApi("accounts.isAvailableLoginID","loginID"),new a.ServerApi("accounts.resendVerificationCode","regToken|email"),new a.ServerApi("accounts.getCaptcha",""),new a.ServerApi("accounts.getPolicies","sections"),new a.ServerApi("accounts.getSchema","sections|schemaType"),new a.ServerApi("accounts.getAccountInfo","include|extraProfileFields|regToken",!0,{},{},"regToken"),new a.ServerApi("accounts.setAccountInfo","profile|data|regToken|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange|conflictHandling",
!1,void 0,{forceHttps:!0,forcePost:!0},"regToken"),new a.ServerApi("accounts.logout","signIDs",!0,{preprocessor:function(a,d){b.partnerSettings.ssoKey&&(a.signIDs=!0);d()}}),new a.ServerApi("accounts.search","expTime|querySig|query"),new a.ServerApi("accounts.getScreenSets","screenSetIDs|include"),new a.ServerApi("accounts.getConflictingAccount","regToken|loginID"),new a.ServerApi("accounts.incrementCounters","counters",!0,{preprocessor:function(b,a){var c=b.actionCounterPath,d=b.counters;if(c&&d)for(var h=
0;h<d.length;h++){var p=d[h];"object"!=typeof p||p.path||(p.path=c)}a()}}),new a.ServerApi("accounts.getCounters","counters",!0),new a.ServerApi("accounts.tfa.getProviders","regToken",!0,{},{},"regToken"),new a.ServerApi("accounts.tfa.initTFA","provider|mode|regToken",!1,{},{forceHttps:!0}),new a.ServerApi("accounts.tfa.finalizeTFA","gigyaAssertion|providerAssertion|tempDevice|regToken",!0,{},{},"regToken"),new a.ServerApi("accounts.tfa.deactivateProvider","provider",!0),new a.ServerApi("accounts.tfa.unregisterDevice",
"allDevices",!0),new a.ServerApi("accounts.tfa.phone.getRegisteredPhoneNumbers","gigyaAssertion",!1,{},{forceHttps:!0}),new a.ServerApi("accounts.tfa.phone.removePhone","gigyaAssertion|phoneId",!1,{},{forceHttps:!0}),new a.ServerApi("accounts.tfa.phone.sendVerificationCode","gigyaAssertion|lang|phoneID|phone|method",!1,{},{forceHttps:!0}),new a.ServerApi("accounts.tfa.phone.completeVerification","gigyaAssertion|phvToken|code",!1,{},{forceHttps:!0}),new a.ServerApi("ds.store","type|data|oid|updateBehavior"),
new a.ServerApi("ds.get","type|data|oid|fields"),new a.ServerApi("ds.search","expTime|querySig|query"),new a.ServerApi("ds.getSchema",""),new a.ServerApi("ds.delete","type|oid|fields"),new a.ServerApi("ids.getAccountInfo","include|extraProfileFields",!0),new a.ServerApi("ids.setAccountInfo","profile|data|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange",!1,void 0,{forceHttps:!0,forcePost:!0}),new a.ServerApi("ids.search",
"expTime|querySig|query"),new a.ServerApi("gscounters.sendReport","reports|noAuth")];b.utils.functions.createAlias("gigya.socialize.showChatUI",b.chat.showChatUI);b.utils.functions.createAlias("gigya.socialize.showCommentsUI",b.comments.showCommentsUI);b.utils.functions.createAlias("gigya.socialize.showRatingUI",b.comments.showRatingUI);b.utils.functions.createAlias("gigya.services.socialize",b.socialize);b.utils.functions.createAlias("gigya.services.gcs",b.gcs);b.utils.functions.createAlias("gigya.services.gm",
b.gm);b.utils.functions.createAlias("gigya.services.comments",b.comments);b.utils.functions.createAlias("gigya.services.accounts",b.accounts);b.utils.functions.createAlias("gigya.socialize.connect",b.socialize.addConnection);b.utils.functions.createAlias("gigya.socialize.disconnect",b.socialize.removeConnection);b.utils.functions.createAlias("gigya.socialize.linkAccounts",b.socialize.setUID);b.utils.functions.createAlias("gigya.socialize.showConnectUI",b.socialize.showAddConnectionsUI);b.utils.functions.createAlias("gigya.socialize.showNewsfeedUI",
b.socialize.showFeedUI);b.utils.functions.createAlias("gigya.showDebugUI",b.socialize.showDebugUI)})(b._||(b._={}))})(gigya||(gigya={}));(function(b){b=b._||(b._={});b=b.apiAdapters||(b.apiAdapters={});b.a})(gigya||(gigya={}));
(function(b){(function(a){(function(a){function h(){if("undefined"!=typeof FB){var c=function(c){a.initializedTime=new Date;a.isConnected="connected"==c.status;a.isLoggedIn="unknown"!=c.status;b.events.global.dispatch({eventName:"FBCRefreshed"})};b.providersConfig.facebook.appID&&FB&&FB.getLoginStatus&&FB.getLoginStatus(c,!0)}}function f(){for(var b=e,a=0;a<b.length;a++)b[a]();e=[]}var e=[];a.initializedTime;a.isLoggedIn=!1;a.isConnected=!1;a.isLoaded=function(){return null!=a.initializedTime};a.load=
function(c){if(!a.initializedTime){a.initializedTime=null;window.setInterval(function(){b.external.facebook.refreshSession()},27E5);window.fbAsyncInit=function(){var e=b.utils.object.clone(b.thisScript.globalConf.facebookInitParams);e||(e={});b.providersConfig.facebook&&(e.appId=b.providersConfig.facebook.appID);e.status=!1;e.cookie=!0;e.xfbml=!0;e.oauth=!0;FB.init(e);!0!=c?FB.getLoginStatus(function(c){a.initializedTime=new Date;a.isConnected="connected"==c.status;a.isLoggedIn="unknown"!=c.status;
b.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:a.isLoggedIn,isConnected:a.isConnected});b.socialize.addEventHandlers({listenerType:"component"},{listenerDescription:"listener for updating Facebook Connect session",onLogin:function(){h()},onConnect:function(){h()},onLogout:function(){h()}})},!0):(a.initializedTime=new Date,b.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:a.isLoggedIn,isConnected:a.isConnected}))};var e=document.createElement("div");e.id="fb-root";b.utils.DOM.appendToBody(e);
b.utils.script.load(document.location.protocol+"//connect.facebook.net/"+b.thisScript.lang.full.replace("-","_")+"/all.js",null,function(){"none"==document.documentElement.style.display&&(document.documentElement.style.display="")},!0)}};a.refreshSession=h;a.retryPending=f;a.runWhenLoaded=function(b){e.push(b)};a.getParams=function(){var b={};if("undefined"!=typeof FB&&FB.getAuthResponse)try{var a=FB.getAuthResponse();a&&(null!=a.userID&&(b.fb_UID=a.userID),null!=a.accessToken&&(b.fb_at=a.accessToken),
null!=a.expiresIn&&(b.fb_exp=a.expiresIn))}catch(d){}return b};a.autoLogin=function(){b.socialize.waitForService({service:"facebook",callback:function(){b._.apiAdapter.isSessionValid(b.thisScript.globalConf,function(a){var d=b.external.facebook.getParams();!a&&d&&d.fb_at&&!b._.autoLoginInProgress&&(b._.autoLoginInProgress=!0,b.socialize.notifyLogin({providerSessions:{facebook:{authToken:d.fb_at,tokenExpiresIn:d.fb_exp}}}))})}})};b.events.global.add("facebookLoaded",f,"component");b.events.global.add("onFBCRefreshed",
f,"component")})(a.facebook||(a.facebook={}))})(b.external||(b.external={}))})(gigya||(gigya={}));
(function(b){(function(a){(function(a){a.initializedTime;a.isLoaded=function(){return null!=a.initializedTime};a.load=function(){var h=this;if(!a.initializedTime&&b.providersConfig.googlePlus){a.initializedTime=null;var f=document.createElement("script");f.type="text/javascript";f.async=!0;window.__gigya_handleClientLoad=function(){return h.handleClientLoad()};f.src="https://apis.google.com/js/client.js?onload=__gigya_handleClientLoad";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(f,
e)}};a.handleClientLoad=function(){delete window.__gigya_handleClientLoad;a.initializedTime=new Date;b.events.global.dispatch({eventName:"googlePlusLoaded"})};a.refreshSession=function(){};a.autoLogin=function(){b.socialize.waitForService({service:"googlePlus",callback:function(){b._.apiAdapter.isSessionValid(b.thisScript.globalConf,function(a){a||gapi.auth.authorize({client_id:b.providersConfig.googlePlus.clientId,scope:b.providersConfig.googlePlus.scopes,immediate:!0,response_type:"code"},function(a){a&&
a.code&&!b._.autoLoginInProgress&&(b._.autoLoginInProgress=!0,b.socialize.notifyLogin({providerSessions:{googlePlus:{code:a.code}}}))})})}})}})(a.googlePlus||(a.googlePlus={}))})(b.external||(b.external={}))})(gigya||(gigya={}));
(function(b){(function(a){(function(a){a._ready=null;a.executeOnInit=function(a,d){a&&(d||(d=2E3),b.external.backplane.isLoaded()?b.external.backplane.getChannelId()||b.external.backplane._ready?(b.external.backplane._ready=!0,a()):(window.setTimeout(function(){b.external.backplane._ready||(b.external.backplane._ready=!0,a())},d),Backplane(function(){b.external.backplane._ready=!0;a()})):a())};a.isLoaded=function(){return"undefined"!=typeof Backplane};a.getChannelId=function(){if(b.external.backplane.isLoaded())return Backplane.getChannelID()};
a.resetChannel=function(){b.external.backplane.isLoaded()&&Backplane.resetCookieChannel()};b.events.global.add("logout",b.external.backplane.resetChannel)})(a.backplane||(a.backplane={}))})(b.external||(b.external={}))})(gigya||(gigya={}));
(function(b){(function(a){(function(a){a.getMetaTag=function(a){for(var b=document.getElementsByTagName("meta"),d=0;d<b.length;d++)if(b[d].getAttribute("property")==a&&b[d].getAttribute("content"))return b[d].getAttribute("content")}})(a.opengraph||(a.opengraph={}))})(b.external||(b.external={}))})(gigya||(gigya={}));
(function(b){(function(a){(function(b){b[b.LocalStorageListener=0]="LocalStorageListener";b[b.PostMessage=1]="PostMessage";b[b.Flash=2]="Flash"})(a.MessagingMethod||(a.MessagingMethod={}));a.checkCompleteRegistration=function(a,h,f){var e,c;if(!h.dontHandleScreenSet&&((a.regToken||h.regToken)&&(200010==a.errorCode||403043==a.errorCode)||206001==a.errorCode||206002==a.errorCode||206003==a.errorCode||403101==a.errorCode||403102==a.errorCode||403110==a.errorCode||403100==a.errorCode)){var g;403110==
a.errorCode&&(g=c=!0);h.defaultMobileRegScreenSet&&b.localInfo.isMobile?e=h.defaultMobileRegScreenSet:h.defaultRegScreenSet&&(e=h.defaultRegScreenSet)}e?b.accounts.showScreenSet({newModal:g,initialResponse:a,screenSet:e,onHide:function(b){"finished"===b.reason&&b.user?f({errorCode:0,userInfo:b.user},!0,c):f(a)}}):f(a)};a.getGigyaSettings=function(a){var h=b.utils.localStorage.getItem("gigyaSettings");try{h=b.utils.JSON.deserialize(h)}catch(f){h={}}h||(h={});return b.utils.JSON.serialize(h[a])};a.setGigyaSettings=
function(a,h){var f=b.utils.localStorage.getItem("gigyaSettings");try{f=b.utils.JSON.deserialize(f)}catch(e){f={}}f||(f={});f[a]||(f[a]={});for(var c in h)f[a][c]=h[c];b.utils.localStorage.setItem("gigyaSettings",b.utils.JSON.serialize(f))};a.delGigyaSettings=function(a,h){if(a){var f=b.utils.localStorage.getItem("gigyaSettings");f&&(f=b.utils.JSON.deserialize(f),delete f[a],b.utils.localStorage.setItem("gigyaSettings",b.utils.JSON.serialize(f)))}else b.utils.localStorage.removeItem("gigyaSettings")};
a.handleSpecialFields=function(d){var h=b.socialize.Collection,f=function(b,c){for(var d=[],e=0,f=b[e];f;)d.push(new c(f)),d[e].identities&&a.convertIdentitiesArrayToObject(d[e]),f=b[++e];return d};d.photos&&(d.photos=new h(d.photos,"photoID"));d.albums&&(d.albums=new h(d.albums,"albumID"));d.contacts&&(d.contacts=new h(f(d.contacts,b.socialize.Contact),"email"));d.friend&&(d.friend=new h(f(d.friend,b.socialize.Friend),"UID"));d.user&&(d.user=new b.socialize.User(d.user));if(d.friends&&d.friends instanceof
Array){for(var e=[],c=0;c<d.friends.length;c++)e.push(d.friends[c].UID);d.UIDs=e.join(",");d.friends=new h(f(d.friends,b.socialize.Friend),"UID")}};a.convertIdentitiesArrayToObject=function(a){if(null==a.identities)a.identities={};else if(a.identities.constructor==Array){var h=a.identities;a.identities={};for(var f=0;f<h.length;f++)a.identities[h[f].provider]=new b.socialize.Identity(h[f])}};a.addUserInfoToEvent=function(a,h,f,e){e=a.user||a.userInfo;null==h&&(h={});null!=e&&(h.user=b.utils.object.clone(e),
null!=a.isLoggedIn&&(h.user.isLoggedIn=a.isLoggedIn),null!=a.isSiteUID&&(h.user.isSiteUID=a.isSiteUID),null!=a.iRank&&(h.user.iRank=a.iRank));f&&(b.utils.object.extractProperties(a,h,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID"),null!=h.user&&(h.UID=e.UID,h.isSiteUID=e.isSiteUID));return h};a.sendEmailNative=function(a){var h=a.userAction||{};document.location.href="mailto:?to=&subject="+(h.title||"")+"&body="+(h.linkBack||"");b.socialize.sendEmail(a,{dontSendEmail:!0})}})(b._||
(b._={}))})(gigya||(gigya={}));
(function(b){(function(a){function d(){b.utils.script.load(b._.getCdnResource("/js/gigya.services.socialize.plugins.log.min.js"),null,function(){b.log.showConfig()},!0)}a._log=[];a._isEnabled=function(){return"1"==b.utils.cookie.get("_gig_dbgConsole_log")};a.addLog=function(d,f){if(b.log._isEnabled()){f=b.utils.object.clone(f,!0,!1,4,null,!0);var e=d;null!=f&&(e+=":"+("object"==typeof f?"\n":"")+b.utils.JSON.serialize(f,!0,!0));a._log.push(e);"object"==typeof console&&console.log(e);null!=document.getElementById("gigya_log")&&
b.log.show&&b.log.show()}};a.logCall=function(a,d,e){e||(e=d.lastSource);b.log.addLog("Calling "+a+(e&&e!=a?" for "+e:"")+(d.source&&e!=d.source?" initiated from "+d.source:"")+" with these params",d)};a.debug=d;a.showLog=function(){b.utils.script.load(b._.getCdnResource("/js/gigya.services.socialize.plugins.log.min.js"),null,function(){b.log.show()},!0)};a.show=function(){};a.showConfig=function(){};b.utils.functions.createAlias("gigya.debug",d)})(b.log||(b.log={}))})(gigya||(gigya={}));
var defaultObjects={},defaultObjectsDef={User:"personwithuid+isLoggedIn|false,isConnected|false,isSiteUser|false,identities|{},providers|[],timestamp,UIDSig,UIDSignature,signatureTimestamp,loginProvider,loginProviderUID,capabilities|{}",Friend:"personwithuid+timestamp,friendshipSig,friendshipSignature,signatureTimestamp,timestamp,isSiteUser|false,identities|{}",Identity:"person+isExpiredSession|false,allowsLogin|false,providerUID,provider,isLoginIdentity|false,missingPermissions",Contact:"provider,firstName,lastName,nickname,email,photoURL",
person:"nickname,photoURL,thumbnailURL,birthDay|0,birthMonth|0,birthYear|0,gender,email,proxiedEmail,country,state,city,zip,firstName,lastName,profileURL,age|0",personwithuid:"person+UID,isSiteUID|false",UserAction:"actorUID,actorNickname,actionName,date|new Date(),targets|[],images|[],actionData1,actionData2,iconURL,title,linkBack,userMessage,description,actionLinks|[],mediaItems|[],subtitle"},createDefaultObject=function(b){var a={};b=defaultObjectsDef[b];-1!=b.indexOf("+")&&(a=createDefaultObject(b.split("+")[0]),
b=b.split("+")[1]);b=b.split(",");for(var d=0;d<b.length;d++){var h="",f=b[d].split("|");if(1<f.length)try{h=gigya.utils.JSON.deserialize(f[1])}catch(e){}a[f[0]]=h||""}return a},_createConstructor=function(b){return function(a){var d=defaultObjects[b],h;for(h in d)this[h]=gigya.utils.object.clone(d[h]);if("object"==typeof a)for(h in a)"function"!=typeof a[h]&&(this[h]=gigya.utils.object.clone(a[h]))}},def;
for(def in defaultObjectsDef)defaultObjects[def]=createDefaultObject(def),gigya.socialize[def]=_createConstructor(def);gigya.socialize.Collection=function(b,a){this.arr=b;this._key=a?a:""};
gigya.socialize.Collection.prototype={asArray:function(){return this.arr},each:function(b){for(var a=0,d=this.arr[a];d;)b(d,a),a++,d=this.arr[a]},getById:function(b){"undefined"==typeof this._hash&&this._buildHash();return(this._hash?this._hash:this.arr)[b]},getSize:function(){return this.arr.length},_buildHash:function(){var b=this._hash={},a=this._key;this.each(function(d,h){b["function"==typeof d[a]?d[a]():d[a]]=d})}};
gigya.socialize.UserAction.prototype={clone:function(){return new gigya.socialize.UserAction(gigya.utils.object.clone(this,!0,!0))},getTemplate:function(){return this.titleTemplate},setTemplate:function(b){this.titleTemplate=b},getActor:function(b){return{UID:this.actorUID,nickname:this.actorNickname}},setActionName:function(b){this.actionName=b;return this},getActionName:function(b){return this.actionName},getTemplateFields:function(){var b=[],a;for(a in this.templateFields)b.push(this.templateFields[a]);
return new gigya.socialize.Collection(b,"fieldName")},setTemplateField:function(b,a,d){this.templateFields[b]={fieldName:b,text:a,href:d};return this},getTemplateField:function(b){return this.templateFields[b]?this.templateFields[b]:null},addTarget:function(b){if("object"==typeof b)return this.targets.push({UID:b.UID,nickname:b.nickname?b.nickname:""}),this;if("string"==typeof b)return this.targets.push({UID:b,nickname:""}),this},addActionLink:function(b,a){this.actionLinks.push({text:b,href:a?a:
""});return this},addMediaItem:function(b){this.mediaItems.push(b);return this},setTitle:function(b){b&&(this.title=b);return this},setLinkBack:function(b){b&&b.toString&&(b=b.toString());b&&(this.linkBack=b);return this},setUserMessage:function(b){this.userMessage=b?b:"";return this},setDescription:function(b){this.description=b?b:"";return this},addImage:function(b,a){this.addMediaItem({type:"image",src:b,href:a})},getImages:function(){return new gigya.socialize.Collection(this.images,"")},getTargets:function(){return new gigya.socialize.Collection(this.targets,
"UID")},setIconURL:function(b){this.iconURL=b;return this},getIconURL:function(){return this.iconURL},getDate:function(){return this.date},setActionData1:function(b){this.actionData1=b;return this},getActionData1:function(b){return this.actionData1},setActionData2:function(b){this.actionData2=b;return this},getActionData2:function(b){return this.actionData2},setSubtitle:function(b){this.subtitle=b;return this},getSubtitle:function(){return this.subtitle}};
(function(b){(function(a){(function(d){function h(a,b){"undefined"===typeof b&&(b=d.arProviders);for(var c=0;c<b.length;c++)if(b[c].name.toLowerCase()==a.toLowerCase())return b[c]}function f(b){if(b){b=b.split(",");for(var c=0;c<b.length;c++){var d=b[c].replace(/^\s+|\s+$/g,"");a.providers._aliases[d]&&(b[c]=a.providers._aliases[d])}return b.join(",")}}function e(a,b){"undefined"===typeof b&&(b=d.arProviders);for(var c=0;c<b.length;c++)if(b[c].ID==a)return b[c]}function c(a,b,c){"undefined"===typeof b&&
(b="");"undefined"===typeof c&&(c=d.arProviders);b=b.toLowerCase();b=b.split(" ").join("").split(".").join("").toLowerCase().split(",");b=n(b,c);for(c=0;c<b.length;c++)for(var e=0;e<a.length;e++){var f=a[e];(f=f.name||f.toString())&&(f=f.toLowerCase());f==b[c]&&a.splice(e,1)}return a}function g(a,b){null==b&&(b=[]);for(var c=[],d=0;d<a.length;d++){for(var e=a[d],f=!0,h=0;h<b.length;h++){for(var g=!1,k=0;k<e.arDefaultCapabilities.length;k++)if(e.arDefaultCapabilities[k].toLowerCase()==b[h].toLowerCase()){g=
!0;break}if(!g){f=!1;break}}f&&c.push(e)}return c}function k(){return d.arProviders.concat()}function p(a,c){"undefined"===typeof c&&(c=d.arProviders);a=(""+a).split(" ").join("").split(".").join("").toLowerCase();a=f(a);for(var e=(""+a).split(","),e=n(e,c),g=[],k=0;k<e.length;k++){var m=h(e[k],c);null!=m&&-1==b.utils.array.indexOf(g,m)&&g.push(m)}return g}function n(a,b){b||(b=d.arProviders);for(var c=[],e=0;e<a.length;e++)if("*"==a[e])for(var f=0;f<b.length;f++){for(var h=!1,g=0;g<a.length;g++)a[g].toLowerCase()==
b[f].name.toLowerCase()&&(h=!0);h||b[f].explicitOnly||c.push(b[f].name)}else c.push(a[e]);return c}d._aliases={};var m=function(){function a(b,c,e,f,g,h,k){this.ID=b;this.displayName=c;this.width=e;this.height=f;this.explicitOnly=h;this.aliases=k;this.windowOptions="menubar=0,toolbar=0,resizable=1,scrollbars=1,width="+e+",height="+f;this.arDefaultCapabilities=g.split(",");this.name=c.toLowerCase().split(" ").join("").split("!").join("").split(".").join("").split("+").join("plus");if(k)for(d._aliases||
(d._aliases={}),b=k.split("|"),c=0;c<b.length;c++)d._aliases[b[c]]=this.name;"messenger"==this.name&&(this.displayName="Microsoft");"customopenid"==this.name&&(this.displayName="OpenID")}a.prototype.toString=function(){return this.name};return a}();d.Provider=m;d.arProviders=[new m(64,"Facebook",650,400,"login,friends,places,status,actions,photos,offlineaccess,proxiedemail,checkins,facebookactions"),new m(9012,"Twitter",800,440,"login,friends,notifications,actions,status,places,checkins"),new m(72,
"Google+",560,600,"login,friends,contacts",!1,"google|googleplus"),new m(9042,"LinkedIn",865,450,"login,friends,status,actions,notifications"),new m(9803,"Yahoo",500,567,"login,friends,contacts,notifications"),new m(1047,"Messenger",380,540,"login",!1,"messenger|microsoft"),new m(9832,"Instagram",440,420,"login,photos"),new m(9222,"Odnoklassniki",888,425,"login"),new m(9003,"Digg",730,590,"login",!0),new m(9007,"FourSquare",1E3,650,"login,friends,places,checkins"),new m(8191,"Renren",450,350,"login,friends,status,actions"),
new m(8203,"QQ",570,460,"login"),new m(9821,"Sina",640,380,"login,status,actions"),new m(4228,"Mixi",1E3,720,"login,friends,actions,photos",!0),new m(9830,"Yahoo! JAPAN",980,700,"login",!0),new m(8205,"Spiceworks",640,380,"login",!0),new m(8190,"Kaixin",610,510,"login,friends"),new m(9041,"VKontakte",610,510,"login,friends,photos,status,actions"),new m(9800,"AOL",530,720,"login"),new m(4096,"WordPress",700,540,"login"),new m(256,"Blogger",760,400,"login"),new m(16,"LiveJournal",670,360,"login"),new m(1043,
"VeriSign",940,500,"login"),new m(1024,"Typepad",730,590,"login"),new m(4120,"OpenID",730,590,"login"),new m(4218,"Netlog",730,590,"login",!0),new m(4222,"SignOn",870,900,"login",!0),new m(4224,"Orange France",730,590,"login",!0),new m(5002,"Livedoor",970,700,"login",!0),new m(8202,"VZnet",610,510,"login"),new m(9216,"Skyrock",610,510,"login,friends,status",!0),new m(5004,"Fox News",730,590,"login",!0),new m(1051,"PayPal",400,550,"login",!0),new m(9058,"Amazon",785,510,"login",!0),new m(9219,"Xing",
785,510,"login,friends",!0),new m(4121,"Custom OpenID",730,590,"login",!0),new m(4122,"Custom SAML",730,590,"login",!0),new m(6002,"Site",730,590,"",!0)];d.getProviderByName=h;d.replaceProviderAliases=f;d.getProviderById=e;d.hideProvidersByName=c;d.getProvidersForRequiredCapabilities=g;d.getAllProviders=k;d.getProvidersByName=p;d.replaceWildcard=n;b.utils.functions.createAlias("gigya.socialize.getAllProviders",k);b.utils.functions.createAlias("gigya.socialize.replaceProviderAliases",f);b.utils.functions.createAlias("gigya.socialize.getProvidersByName",
p);b.utils.functions.createAlias("gigya.socialize._getProviderByName",h);b.utils.functions.createAlias("gigya.socialize.hideProvidersByName",c);b.utils.functions.createAlias("gigya.socialize._getProviderByID",e);b.utils.functions.createAlias("gigya.socialize.getProvidersForRequiredCapabilities",g)})(a.providers||(a.providers={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(a){function d(){for(;a.queue&&0<a.queue.length;){var d=b.utils.object.clone(a.queue.splice(0,5),!0,!0);b.gscounters.sendReport({reports:d,noAuth:!h(d)})}}function h(a){for(var b=0;b<a.length;b++){var c=a[b];if("loadc"!==c.name&&"load"!==c.name||"loadc"===c.name&&c.reportData&&c.reportData.actionCounterPath)return!0}return!1}a.queue;a.trackAddressBarShares=function(){if(b.thisScript.globalConf.trackAddressBarShares){var a=b._.apiAdapter.getTokenParam(b.thisScript.APIKey,"UUID"),
d=document.location.href.split("#");1!=d.length&&""!=d[1]||document.location.replace("#guid="+(a?a:"_"))}};a.report=function(d,e,c,g,k,p,n){"undefined"===typeof p&&(p={});"undefined"===typeof n&&(n=!1);d=b.utils.object.removeUndefined({name:d,time:(new Date).getTime().toString(),source:g,sourceData:k,reportData:p,cid:c});n?(n=[d],b.gscounters.sendReport({reports:n,noAuth:!h(n)})):(a.queue||(a.queue=[]),a.queue.push(d))};a.init=function(){setInterval(d,5E3)};a.reportLoad=function(a,b){if(!b._reportedLoad){b._reportedLoad=
!0;var c="load";"gigya.socialize.plugins.reactions.showReactionsBarUI"!=a&&("gigya.socialize.plugins.simpleshare.showSimpleShareUI"==a&&(c="loadSimple"),this.report(c,b.APIKey,b.cid,b.source,b.sourceData))}}})(b.reports||(b.reports={}))})(gigya||(gigya={}));
(function(b){b.build||(b.build={version:"",time:""});b.providersConfig||(b.providersConfig={});b.isGigya||(b.isGigya=!0);b.partnerSettings||(b.partnerSettings={authMode:"cookie",baseDomains:"",plugins:{apiDomain:"us1.gigya.com"}});b.thisScript;(function(a){a.autoLoginInProgress})(b._||(b._={}));var a=b._,d;(function(d){function f(){if(b.abTesting)for(var a in b.abTesting)if("optimizely"===a){var c=b.abTesting[a];if(c.serviceParams&&c.serviceParams.hasOwnProperty("apiKey")){var d=window.location.pathname,
e=!1;if(c.disabledPaths)for(var f=0;f<c.disabledPaths.length;f++)if(-1<c.disabledPaths[f].indexOf(d)){e=!0;break}if(!e)for(f=0;f<c.enabledPaths.length;f++)-1<d.indexOf(c.enabledPaths[f])&&b.utils.script.load("//cdn.optimizely.com/js/"+c.serviceParams.apiKey+".js")}}}function e(a){"1"==b.utils.cookie.get("gig_debug")?b.socialize.showDebugUI({ignoreApiQueue:!0,waitForDebug:!1,onLoad:a}):a()}function c(){b.utils.functions.invokeOnPageLoad(function(){"undefined"!=typeof window.gigya_omniture_conf&&b.utils.script.load(b._.getCdnResource("/js/GenesisExchange_Gigya.min.js"))})}
function g(){var a=b.partnerSettings.baseDomains;if(a)for(var a=a.split(","),c=0;c<a.length;c++){var d=a[c],e=b.localInfo.pageDomain.indexOf(d);if(0<=e&&e==b.localInfo.pageDomain.length-d.length&&(0==e||"."==b.localInfo.pageDomain.charAt(e-1)))return d}return document.location.href.split("://")[1].split("/")[0]}function k(a){a||(a="en-US");a=a.replace("_","-").toLowerCase();var b=a.split("-"),c=b[0],b=1<b.length?b[1]:c,b=b.toUpperCase();switch(a){case "es-mx":case "pt-br":case "zh-cn":case "zh-hk":case "zh-tw":case "te-st":case "fr-inf":case "de-inf":case "es-inf":case "nl-inf":break;
default:a=c}return{full:c+"-"+b,langCode:a,countryCode:b}}function p(a){for(var c=document.getElementsByTagName("script"),d,e=c.length-1;0<=e;e--){var f=c[e],g=f.src.toLowerCase();if(""!=g&&(-1<g.indexOf("//cdn.gigya.com")||-1<g.indexOf("//cdns.gigya.com")||-1<g.indexOf("?apikey="))&&(-1<g.indexOf("gigya.js")||-1<g.indexOf("socialize.js")||-1<g.indexOf("socialize2.js")||-1<g.indexOf("gsjssdk.js"))){d=f;break}}if(d&&!window.__gig_hidescript){var c=d.src.split("/"),e=b.utils.URL.getParamsFromURL(d.src,
!0)||{},h;if(""!=d.innerHTML.replace(/^\s+|\s+$/g,""))try{h=b.utils.JSON.deserialize(d.innerHTML),"object"!=typeof h&&(h={})}catch(l){alert("Gigya global configuration object parse error")}b.thisScript={scriptElement:d,protocol:0==d.src.toLowerCase().indexOf("https")?"https":"http",base:c[0]+"//"+c[2],APIKey:e.apikey,lang:k(e.lang||(h?h.lang:null)),globalConf:b.utils.object.merge([b.partnerSettings.plugins||{},h||{},window.__gigyaConf||{}]),URLParams:e};!b.thisScript.APIKey&&"object"==typeof console&&
console.warn?console.warn("**** WARNING - Loading socialize.js without an APIKey parameter is unsupported and may result in an unexpected behavior.  ****"):b.thisScript.globalConf.APIKey=b.thisScript.APIKey;b.thisScript.globalConf.lang=b.thisScript.lang.langCode;a()}else 10>r?(r++,window.setTimeout(function(){p(a)},200)):(b.thisScript={scriptElement:null,protocol:"http:"==document.location.protocol?"http":"https",base:"https:"==document.location.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com",
APIKey:"",lang:k(""),globalConf:{},URLParams:{}},a())}function n(c){var d=window.__gigAPIAdapterSettings;d&&"mobile"==d.getAdapterName()&&d.getAPIKey()==b.thisScript.APIKey?a.apiAdapter=new a.apiAdapters.mobile.MobileAdapter:a.apiAdapter=new a.apiAdapters.web.WebAdapter;b.utils.functions.createAlias("gigya.auth.loginToken.getTokenParam",a.apiAdapter.getTokenParam);e(function(){a.apiAdapter.init(function(){c()})})}function m(){var c=b.utils.URL.getParamsFromURL(document.location.href);c.errorCode&&
c.regToken&&a.checkCompleteRegistration(c,b.thisScript.globalConf,function(){})}function l(){var a=b.localInfo;a.messagingMethod=a.isIE11||a.isIOSChrome?0:a.supportsPostMessage?1:2}function t(){b.utils.queue.queueForExecution("API",function(){b.utils.functions.invokeOnPageLoad(function(){b.providersConfig.facebook&&b.external.facebook.load(!1);b.providersConfig.googlePlus&&b.external.googlePlus.load()})})}var r=0;(function(){if(window._isAPIProxy)a.apiAdapters.web.APIProxy.init();else{b.utils.queue.hold("bootstrap",
"API");b.partnerSettings.baseDomain=g();var d=b.partnerSettings.plugins,e;e=b.partnerSettings.customAPIDomainPrefix?b.partnerSettings.customAPIDomainPrefix+"."+b.partnerSettings.baseDomain:b.partnerSettings.plugins.apiDomain;d.apiDomain=e;b.reports.init();p(function(){l();b.thisScript.globalConf.customEventMap&&b.events.addMap(b.thisScript.globalConf.customEventMap);n(function(){b.utils.queue.release("bootstrap","API");t();b.thisScript.globalConf.autoLogin&&(b.external.facebook.autoLogin(),b.external.googlePlus.autoLogin());
m();b.reports.trackAddressBarShares();b.utils.functions.invokeOnPageLoad(function(){window.setTimeout(function(){b.socialize.trackReferrals()},1E3)})});c();f();"function"==typeof onGigyaServiceReady&&onGigyaServiceReady("socialize");var a={sref:document.referrer};b.thisScript.globalConf.actionCounterPath&&(a.actionCounterPath=b.thisScript.globalConf.actionCounterPath);b.reports.report("loadc",b.thisScript.APIKey,null,null,null,a)})}})()})(d||(d={}))})(gigya||(gigya={}));


} else if (typeof console == 'object' && console.warn) {
console.warn('**** Socialize.js loaded twice ****');
}
